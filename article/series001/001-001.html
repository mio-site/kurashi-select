<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>ã€2025å¹´æœ€æ–°ã€‘ãƒãƒå‘ã‘ï½œæ¥½å¤©ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ãƒ»é«˜æ©Ÿèƒ½Ã—ä½“å‹ã‚«ãƒãƒ¼ã®ãŠã™ã™ã‚10é¸</title>

    <!-- SEO & Viewport Meta Tags -->
    <meta name="description" content="å¿™ã—ã„ãƒãƒå‘ã‘ã€‚ä¿è‚²åœ’é€è¿ãƒ»å…¬åœ’ãƒ»ãŠå‡ºã‹ã‘ã«â€œãƒ©ã‚¯ã—ã¦ãã‚Œã„è¦‹ãˆâ€ã€‚UVã‚«ãƒƒãƒˆãƒ»å†·æ„Ÿãƒ»ä½“å‹ã‚«ãƒãƒ¼ãƒ»æ´—æ¿¯ã«å¼·ã„ç­‰ã€å®Ÿå£²ãƒ‡ãƒ¼ã‚¿ã§é¸ã‚“ã å¤±æ•—ã—ã«ãã„æ¥½å¤©ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹TOP10ã‚’ä¾¡æ ¼ãƒ»è©•ä¾¡ãƒ»äººæ°—ã§æ¯”è¼ƒã€‚">
    <meta content='width=device-width,initial-scale=1.0,minimum-scale=1.0' name='viewport'/>
    <meta name="theme-color" content="#A88767">

    <!-- Icons & PWA -->
    <link rel="icon" type="image/png" href="../../icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png">
    <link rel="manifest" href="../../manifest.webmanifest">

    <!-- Tailwindã¯åˆæœŸæç”»ã§å¿…è¦ãªãŸã‚ defer ã—ãªã„ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <!-- å…±é€šãƒ«ãƒ¼ãƒˆè¨­å®š -->
    <script src="../../routes.js"></script>

    <!-- Stylesheets (CSS é…å»¶èª­ã¿è¾¼ã¿ã‚’é©ç”¨) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    
    <style>
        :root {
            /* é«˜ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãªé…è‰²ã«èª¿æ•´ */
            --bg: #FAFAFA;
            --text: #1A1A1A;
            --primary: #2563EB; /* Primary: é’ */
            --accent: #6B7280;  /* Secondary: ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ« */
            --card: #FFFFFF;
            --muted: #4B5563; /* gray-600 ç›¸å½“ */
        }
        .dark {
            --bg: #0F172A;     /* slate-900 */
            --text: #E5E7EB;   /* gray-200 */
            --primary: #93C5FD;/* blue-300 */
            --accent: #9CA3AF; /* gray-400 */
            --card: #0B1220;   /* å°‘ã—æš—ã„ã‚«ãƒ¼ãƒ‰ */
            --muted: #9CA3AF;  /* gray-400 */
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.75;
            font-size: 18px; /* æœ¬æ–‡ã‚’16â†’18pxã«æ‹¡å¤§ */
            font-variant-numeric: tabular-nums; /* ä¾¡æ ¼è¡¨ç¤ºã®æ¡ã‚’æƒãˆã‚‹ */
        }
        .bg-primary { background-color: var(--primary); }
        .text-primary { color: var(--primary); }
        .border-primary { border-color: var(--primary); }
        .bg-accent { background-color: var(--accent); }
        .border-accent { border-color: var(--accent); }
        .text-muted { color: var(--muted); }
        .transition-all { transition: all 0.3s ease-in-out; }
        .transform-gpu { transform: translateZ(0); }
        .card-shadow { box-shadow: 0 8px 24px rgba(0,0,0,0.06); }
        .card-shadow-hover:hover { box-shadow: 0 12px 28px rgba(0,0,0,0.10); }
        .chart-container { position: relative; height: 450px; width: 100%;}
        .dark .bg-white { background-color: var(--card); }
        .dark .text-gray-600 { color: var(--muted); }
        .chip { border: 1px solid #E5E7EB; padding: 6px 10px; border-radius: 9999px; font-size: 13px; background: #fff; color: #374151; }
        .chip-selected { outline: 2px solid var(--primary); background-color: rgba(37, 99, 235, 0.08); }
        .sticky-bar { position: sticky; bottom: 12px; z-index: 40; }
        .floating { position: fixed; right: 16px; bottom: 16px; z-index: 50; }
        .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.35); display: none; align-items: center; justify-content: center; z-index: 50; }
        .modal { max-width: 960px; width: calc(100% - 2rem); background: var(--card); color: var(--text); border-radius: 16px; box-shadow: 0 25px 50px rgba(0,0,0,0.2); }
        .range { accent-color: var(--primary); }
        .btn { cursor: pointer; }
        .highlight-ring { box-shadow: 0 0 0 4px rgba(37,99,235,0.35) inset; transition: box-shadow .3s ease; }
        /* å¼·èª¿CTAã‚«ãƒ©ãƒ¼ */
        :root { --cta: #F59E0B; }
        .dark { --cta: #F3B34D; }
        .bg-cta { background-color: var(--cta); }
        .text-cta { color: var(--cta); }
        .btn-cta { background-color: var(--cta); color: #fff; }
        /* è¡Œã®æŠ˜ã‚ŠãŸãŸã¿ï¼ˆå•†å“åçŸ­ç¸®ï¼‰ */
        .line-clamp-2 { display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 2; line-clamp: 2; overflow: hidden; }
        .line-clamp-3 { display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 3; line-clamp: 3; overflow: hidden; }
        /* æ¯”è¼ƒè¡¨ã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ— */
        .table-striped tbody tr:nth-child(even) { background-color: rgba(0,0,0,0.035); }
        .dark .table-striped tbody tr:nth-child(even) { background-color: rgba(255,255,255,0.04); }
        /* TOC ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
        .toc-scroll { overflow-x: auto; -webkit-overflow-scrolling: touch; }

        /* ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£: ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒªãƒ³ã‚°/ãƒªãƒ³ã‚¯ */
        a { color: var(--primary); }
        a:hover { text-decoration: underline; text-underline-offset: 2px; }
        :focus-visible { outline: 2px solid var(--primary); outline-offset: 2px; }

        /* ãƒ•ã‚£ãƒ«ã‚¿å€¤ã®å¼·èª¿ */
        #label-rating, #label-review { color: var(--primary); font-weight: 700; }

        /* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å¯ç”¨æ€§æ”¹å–„ï¼ˆå¤§ãã‚ã®ã¤ã¾ã¿ï¼‰ */
        input[type="range"] { -webkit-appearance: none; appearance: none; height: 6px; border-radius: 9999px; background: #E5E7EB; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 22px; height: 22px; border-radius: 9999px; background: var(--primary); border: 2px solid #fff; box-shadow: 0 1px 2px rgba(0,0,0,0.15); }
        input[type="range"]::-moz-range-thumb { width: 22px; height: 22px; border-radius: 9999px; background: var(--primary); border: 2px solid #fff; box-shadow: 0 1px 2px rgba(0,0,0,0.15); }

        /* FAQ é–‹çŠ¶æ…‹ã®è¦–è¦šçš„å·®åˆ† */
        #faq details[open] { background: rgba(37,99,235,0.04); }
        #faq summary { font-size: 1.05rem; }

        /* SNSå…±æœ‰ãƒãƒ¼ */
        .share-bar { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .share-chip { display: inline-flex; align-items: center; gap: 8px; padding: 10px 14px; border: 1px solid #E5E7EB; border-radius: 9999px; background: #fff; color: #374151; }
        .dark .share-chip { background: var(--card); color: var(--text); border-color: rgba(148,163,184,0.35); }
        .share-chip:hover { box-shadow: 0 8px 18px rgba(0,0,0,0.06); transform: translateY(-1px); }
        .share-chip svg { width: 18px; height: 18px; }
        .icon-bg { display:inline-flex; width:22px; height:22px; border-radius:9999px; align-items:center; justify-content:center; color:#fff; }
        .share-chip[data-share-action='x'] .icon-bg { background:#000; }
        .share-chip[data-share-action='line'] .icon-bg { background:#06C755; }
        .share-chip[data-share-action='copy'] .icon-bg { background:#6B7280; }
        .share-chip[data-share-action='native'] .icon-bg { background: var(--primary); }

        /* ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å…±æœ‰ãƒœã‚¿ãƒ³ï¼ˆã‚¹ãƒãƒ›ï¼‰ */
        .floating-left { position: fixed; left: 16px; bottom: 16px; z-index: 50; }
        
        /* --- è¿½åŠ : æ¥µå°ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ --- */
        .site-header { position: fixed; inset-inline: 0; top: 0; z-index: 60; backdrop-filter: saturate(180%) blur(12px); transition: transform .25s ease, background-color .2s ease; }
        .site-header-inner { display: flex; align-items: center; justify-content: space-between; gap: 12px; max-width: 1200px; margin: 0 auto; padding: 10px 16px; }
        .site-header.hide { transform: translateY(-100%); }
        .site-logo { font-weight: 800; letter-spacing: .2px; }
        .site-nav { display: none; gap: 12px; }
        .site-nav a { display: inline-flex; align-items: center; padding: 8px 10px; border-radius: 9999px; text-decoration: none; font-size: 14px; }
        @media (min-width: 768px){ .site-nav{ display: inline-flex; } }
        .dark .site-header { background-color: rgba(11, 18, 32, 0.72); }
        .site-header { background-color: rgba(255,255,255,0.85); }
        body.has-header { padding-top: 56px; }

        /* --- è¿½åŠ : å³ã‚µã‚¤ãƒ‰TOCï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é™å®šï¼‰ --- */
        .right-toc { display: none; position: fixed; top: 96px; right: 16px; width: 220px; max-height: calc(100vh - 140px); overflow: auto; padding: 12px; border-radius: 12px; background: rgba(255,255,255,0.78); backdrop-filter: blur(10px); border: 1px solid rgba(0,0,0,0.06); box-shadow: 0 8px 24px rgba(0,0,0,0.06); z-index: 40; }
        .right-toc h3 { font-size: 14px; font-weight: 700; margin-bottom: 8px; color: var(--primary); }
        .right-toc a { display: block; padding: 8px 10px; border-radius: 8px; color: inherit; text-decoration: none; font-size: 14px; }
        .right-toc a:hover { background: rgba(37,99,235,0.08); }
        .right-toc a.active { background: rgba(37,99,235,0.12); font-weight: 700; }
        .dark .right-toc { background: rgba(11,18,32,0.65); border-color: rgba(148,163,184,0.35); }
        /* 1280pxä»¥ä¸Šã§è¡¨ç¤ºã€‚ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å¤–ã«å¯„ã›ã¤ã¤ã€ç”»é¢ç«¯ã‹ã‚‰16pxã¯ç¢ºä¿ */
        @media (min-width: 1280px){ .right-toc{ display: block; right: auto; left: min(calc(100vw - 16px - 220px), calc(50% + 600px + 16px)); } }
    </style>
</head>
<body id="top" class="antialiased" style="display: none;">

    <!-- æ¥µå°ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§éš ã‚Œã‚‹ï¼‰ -->
    <div id="site-header" class="site-header">
        <div class="site-header-inner">
            <a href="../../index.html" class="site-logo text-primary">kurashi-select</a>
            <nav class="site-nav" aria-label="ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒŠãƒ“">
                <a href="#toc">ç›®æ¬¡</a>
                <a href="#interactive-selection">å•†å“</a>
                <a href="#faq">FAQ</a>
                <a href="#conclusion">ã¾ã¨ã‚</a>
            </nav>
        </div>
    </div>

    <!-- å³ã‚µã‚¤ãƒ‰ç›®æ¬¡ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é™å®šãƒ»ScrollSpyï¼‰ -->
    <nav id="right-toc" class="right-toc" aria-label="ãƒšãƒ¼ã‚¸å†…ç›®æ¬¡">
        <h3>ãƒšãƒ¼ã‚¸å†…</h3>
        <a href="#top3">ğŸ‘‘ ãƒˆãƒƒãƒ—3</a>
        <a href="#controls">ğŸ” çµã‚Šè¾¼ã¿</a>
        <a href="#chart-analysis">ğŸ“ˆ ã‚°ãƒ©ãƒ•</a>
        <a href="#interactive-selection">ğŸ› å•†å“ä¸€è¦§</a>
        <a href="#faq">â“ FAQ</a>
        <a href="#conclusion">âœ… ã¾ã¨ã‚</a>
    </nav>

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16">

        <header class="text-center mb-12 md:mb-20">
            <h1 class="text-3xl md:text-5xl font-bold text-primary mb-3">å¿™ã—ã„ãƒãƒã®å‘³æ–¹ï½œæ©Ÿèƒ½æ€§Ã—ç¾ã—ã•ã§â€œæ™‚çŸ­ãŠã—ã‚ƒã‚Œâ€</h1>
            <p class="text-xl md:text-2xl text-gray-700 mb-4">å£²ã‚Œã¦ã„ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚‚é«˜ã„ã€å¤±æ•—ã—ã«ãã„æ¥½å¤©ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹TOP10ã‚’å³é¸</p>
            <div class="flex justify-center">
                <a href="#interactive-selection" class="btn-cta font-bold py-3 px-6 rounded-full shadow hover:opacity-95" aria-label="å•†å“ä¸€è¦§ã¸ç§»å‹•">å•†å“ä¸€è¦§ã¸</a>
            </div>
        </header>
        
        <!-- ã‚·ã‚§ã‚¢ãƒãƒ¼ï¼ˆãƒˆãƒƒãƒ—ï¼‰ -->
        <section id="share-top" class="max-w-4xl mx-auto mb-8 md:mb-12" aria-label="ã“ã®è¨˜äº‹ã‚’å…±æœ‰">
            <div class="bg-white dark:bg-opacity-80 backdrop-blur-sm p-3 sm:p-4 rounded-2xl card-shadow">
                <div class="share-bar" role="group" aria-label="å…±æœ‰ãƒœã‚¿ãƒ³">
                    <button type="button" class="btn share-chip text-sm" data-share-action="native" aria-label="OSã®å…±æœ‰ã‚·ãƒ¼ãƒˆã‚’é–‹ã">
                        <span class="icon-bg" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3v10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M8 7l4-4 4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><rect x="4" y="11" width="16" height="9" rx="2" stroke="currentColor" stroke-width="2"/></svg>
                        </span>
                        OSã§å…±æœ‰
                    </button>
                    <button type="button" class="btn share-chip text-sm" data-share-action="x" aria-label="Xã§ã‚·ã‚§ã‚¢">
                        <span class="icon-bg" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M4 4h4l4 6 4-6h4l-6.5 9L20 20h-4l-4-6-4 6H4l6.5-9L4 4z"/></svg>
                        </span>
                        Xã§ã‚·ã‚§ã‚¢
                    </button>
                    <button type="button" class="btn share-chip text-sm" data-share-action="line" aria-label="LINEã§é€ã‚‹">
                        <span class="icon-bg" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M20 11c0 4.418-4.03 8-9 8-1.036 0-2.03-.145-2.95-.412L4 20l1.59-3.18C4.62 15.53 4 13.83 4 12c0-4.418 4.03-8 9-8s7 3.582 7 7z"/><path fill="#fff" d="M9 9h2v6H9zM12.5 9H15c1.2 0 2 .8 2 2s-.8 2-2 2h-1v2h-1.5V9zm1.5 1.5V12h1c.4 0 .5-.3.5-.5s-.1-.5-.5-.5h-1z"/></svg>
                        </span>
                        LINEã§é€ã‚‹
                    </button>
                    <button type="button" class="btn share-chip text-sm" data-share-action="copy" aria-label="ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼">
                        <span class="icon-bg" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 17a4 4 0 0 1 0-6l4-4a4 4 0 1 1 6 6l-1 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 7a4 4 0 0 1 0 6l-4 4a4 4 0 1 1-6-6l1-1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        </span>
                        ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼
                    </button>
                </div>
            </div>
        </section>

        <section id="intro" class="max-w-3xl mx-auto text-center mb-10 md:mb-14">
            <h2 class="text-2xl md:text-3xl font-bold mb-4">ã“ã‚“ãªãŠæ‚©ã¿ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ</h2>
            <div class="bg-stone-50 p-6 rounded-xl mb-6 text-left">
                <ul class="space-y-2 text-gray-700">
                    <li>â˜ å­è‚²ã¦ã§å¿™ã—ãã¦ã€ãŠã—ã‚ƒã‚Œã«æ™‚é–“ã‚’ã‹ã‘ã‚‰ã‚Œãªã„</li>
                    <li>â˜ ä½“å‹ãŒæ°—ã«ãªã‚‹ã€‚ä¸Šæ‰‹ã«éš ã›ã‚‹æœãŒã»ã—ã„</li>
                    <li>â˜ UVã‚«ãƒƒãƒˆã‚„å†·æ„Ÿãªã©ã®æ©Ÿèƒ½ã‚‚å¤§äº‹ã€‚ã§ã‚‚è¦‹ãŸç›®ã‚‚å¦¥å”ã—ãŸããªã„</li>
                    <li>â˜ ã‚³ã‚¹ãƒ‘é‡è¦–ã€‚æ´—æ¿¯ã«å¼·ãã¦é•·ãä½¿ãˆã‚‹ä¸€ç€ã‚’é¸ã³ãŸã„</li>
                </ul>
            </div>
            <p class="text-base md:text-lg leading-relaxed">
                ã“ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€<strong>ã€Œå£²ã‚Œã¦ã„ã‚‹ Ã— ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒé«˜ã„ã€</strong>ã‚’è»¸ã«ã€<strong>æ©Ÿèƒ½æ€§ãƒ»ä½“å‹ã‚«ãƒãƒ¼ãƒ»ã‚³ã‚¹ãƒ‘</strong>ã®ä¸‰æ‹å­ãã‚ã£ãŸâ€œå¤±æ•—ã—ã«ãã„â€ã‚¢ã‚¤ãƒ†ãƒ ã ã‘ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚å¿™ã—ã„æ¯æ—¥ã§ã‚‚ã€ãƒ©ã‚¯ã«ãã‚Œã„è¦‹ãˆãŒå¶ã†ä¸€ç€ãŒãã£ã¨è¦‹ã¤ã‹ã‚Šã¾ã™ã€‚
            </p>
        </section>

        <!-- ç›®æ¬¡ï¼ˆTOCï¼‰ -->
        <section id="toc" class="max-w-4xl mx-auto mb-10 md:mb-14">
            <div class="bg-white dark:bg-opacity-80 backdrop-blur-sm p-4 sm:p-5 rounded-2xl card-shadow">
                <h2 class="text-xl md:text-2xl font-bold mb-3">ç›®æ¬¡</h2>
                <div class="toc-scroll">
                    <div class="flex gap-2 sm:gap-3 min-w-max">
                        <a href="#top3" class="chip whitespace-nowrap">ğŸ‘‘ ãƒˆãƒƒãƒ—3</a>
                        <a href="#controls" class="chip whitespace-nowrap">ğŸ” çµã‚Šè¾¼ã¿</a>
                        <a href="#chart-analysis" class="chip whitespace-nowrap">ğŸ“ˆ ã‚°ãƒ©ãƒ•ã§æ¯”è¼ƒ</a>
                        <a href="#interactive-selection" class="chip whitespace-nowrap">ğŸ› å•†å“ä¸€è¦§</a>
                        <a href="#faq" class="chip whitespace-nowrap">â“ FAQ</a>
                        <a href="#conclusion" class="chip whitespace-nowrap">âœ… ã¾ã¨ã‚</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç·åˆãƒˆãƒƒãƒ—3ï¼ˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼å¼·åŒ–ï¼‰ -->
        <section id="top3" class="mb-10 md:mb-14">
            <div class="max-w-4xl mx-auto text-center mb-4">
                <h2 class="text-2xl md:text-3xl font-bold mb-2">ãƒãƒãŒé¸ã¶ï¼ç·åˆãƒˆãƒƒãƒ—3</h2>
                <p class="text-sm md:text-base text-gray-700">ã¾ãšã“ã“ã‚’è¦‹ã‚Œã°OKã€‚æ©Ÿèƒ½æ€§ãƒ»ä½“å‹ã‚«ãƒãƒ¼ãƒ»ã‚³ã‚¹ãƒ‘ã®â€œç·åˆç‚¹ãŒé«˜ã„â€3å“ã§ã™ã€‚</p>
                <div class="text-sm md:text-base text-gray-700 mt-2">
                    <span class="chip">å“è³ª(è©•ä¾¡) 33%</span>
                    <span class="chip">ã‚³ã‚¹ãƒ‘(ä¾¡æ ¼) 34%</span>
                    <span class="chip">äººæ°—(ãƒ¬ãƒ“ãƒ¥ãƒ¼) 33%</span>
                    <span class="ml-2 text-muted">ç‹¬è‡ªã‚¹ã‚³ã‚¢ã§ç®—å‡º</span>
                </div>
            </div>
            <div id="top3-container" class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-8"></div>
        </section>

        <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« -->
        <section id="controls" class="bg-white dark:bg-opacity-80 backdrop-blur-sm p-4 sm:p-6 md:p-8 rounded-2xl card-shadow max-w-4xl mx-auto mb-12 md:mb-16">
            <div class="flex flex-col gap-4">
                <div class="flex flex-col md:flex-row gap-3 md:items-center">
                    <div class="flex-1">
                        <label for="search-box" class="block text-sm mb-1 text-muted">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢</label>
                        <input id="search-box" type="search" placeholder="ä¾‹: UV, ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹, ãƒ‘ãƒ³ãƒ„â€¦" class="w-full border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/50" />
                    </div>
                    <div class="flex gap-2 items-end">
                        <button id="btn-dark-toggle" class="btn bg-accent text-white px-4 py-3 rounded-xl card-shadow-hover" aria-pressed="false">ğŸŒ™ ãƒ€ãƒ¼ã‚¯</button>
                        <button id="btn-install" class="btn bg-accent text-white px-4 py-3 rounded-xl card-shadow-hover hidden">â¬‡ï¸ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</button>
                        <button id="btn-reset" class="btn bg-white border px-4 py-3 rounded-xl card-shadow-hover">ãƒªã‚»ãƒƒãƒˆ</button>
                    </div>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm mb-1 text-muted">ä¾¡æ ¼å¸¯ï¼ˆå††ï¼‰</label>
                        <div class="flex items-center gap-2">
                            <input id="price-min" type="number" class="w-28 border rounded-lg px-3 py-2" min="0" step="100" />
                            <span class="text-muted">ã€œ</span>
                            <input id="price-max" type="number" class="w-28 border rounded-lg px-3 py-2" min="0" step="100" />
                            <input id="price-range" type="range" min="0" max="100" value="0" class="range flex-1" aria-label="ä¾¡æ ¼ç¯„å›²(ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ)" />
                        </div>
                    </div>
                    <div>
                        <label for="filter-rating" class="block text-sm mb-1 text-muted">æœ€ä½è©•ä¾¡</label>
                        <input id="filter-rating" type="range" min="0" max="5" step="0.1" value="0" class="range w-full" />
                        <div class="text-xs text-muted mt-1"><span id="label-rating">0.0</span> ä»¥ä¸Š</div>
                    </div>
                    <div>
                        <label for="filter-review" class="block text-sm mb-1 text-muted">æœ€ä½ãƒ¬ãƒ“ãƒ¥ãƒ¼ä»¶æ•°</label>
                        <input id="filter-review" type="range" min="0" max="10000" step="100" value="0" class="range w-full" />
                        <div class="text-xs text-muted mt-1"><span id="label-review">0</span> ä»¶ä»¥ä¸Š</div>
                    </div>
                    <div class="flex items-center gap-3">
                        <label class="inline-flex items-center gap-2 text-sm"><input id="filter-fav" type="checkbox" class="accent-[var(--primary)]"><span>ãŠæ°—ã«å…¥ã‚Šã®ã¿</span></label>
                        <div class="ml-auto flex gap-2">
                            <button id="btn-sort-score" class="btn bg-primary text-white px-4 py-3 rounded-xl card-shadow-hover">âœ¨ ãŠã™ã™ã‚é †</button>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="text-sm mb-2 text-muted">ã‚¿ã‚°ã§çµã‚Šè¾¼ã¿</div>
                    <div id="tags-container" class="flex flex-wrap gap-2"></div>
                </div>
                <div class="text-xs text-muted" id="result-summary" aria-live="polite"></div>
            </div>
        </section>

        <section id="chart-analysis" class="mb-16 md:mb-24">
            <div class="max-w-4xl mx-auto text-center mb-4">
                <h2 class="text-2xl md:text-3xl font-bold mb-2">ä¾¡æ ¼ã¨è©•ä¾¡ã®é–¢ä¿‚ï¼šã©ã‚Œã‚’é¸ã¹ã°æã—ãªã„ï¼Ÿ</h2>
                <p class="text-base md:text-lg text-gray-700">å³ä¸Šï¼ˆé«˜è©•ä¾¡ï¼‰ã§å††ãŒå¤§ãã„ï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼å¤šã„ï¼‰ã»ã©â€œè²·ã£ã¦æº€è¶³â€ã®å‚¾å‘ã€‚æ°—ã«ãªã‚‹ç‚¹ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨è©²å½“ã‚«ãƒ¼ãƒ‰ã¸ç§»å‹•ã—ã¾ã™ã€‚</p>
            </div>
            <details class="max-w-4xl mx-auto bg-white rounded-2xl card-shadow">
                <summary class="list-none cursor-pointer p-4 sm:p-5 md:p-6 flex items-center justify-between">
                    <span class="font-semibold text-primary">äººæ°—Ã—ä¾¡æ ¼ã®é–¢ä¿‚ã‚’è¦‹ã‚‹ï¼ˆã‚°ãƒ©ãƒ•ã‚’é–‹ãï¼‰</span>
                    <span class="text-sm text-muted">ç†è§£ã®åŠ©ã‘ã«ã€‚è²·ã„ç‰©ã¯ä¸‹ã®ãƒªã‚¹ãƒˆã‹ã‚‰ã™ãå¯èƒ½ã§ã™ã€‚</span>
                </summary>
                 <div class="p-4 sm:p-6 md:p-8 pt-0">
                     <div class="chart-container min-h-[400px] w-full">
                         <canvas id="productsChart" style="width: 100%; height: 400px;"></canvas>
                     </div>
                     <div class="mt-3 text-sm md:text-base text-gray-700">
                         <p class="font-semibold mb-1">ã‚°ãƒ©ãƒ•ã®è¦‹æ–¹ï¼ˆå‡¡ä¾‹ï¼‰</p>
                         <ul class="list-disc ml-5 space-y-1">
                             <li>æ¨ªè»¸ï¼šä¾¡æ ¼ï¼ˆå††ï¼‰ï¼ç¸¦è»¸ï¼šãƒ¬ãƒ“ãƒ¥ãƒ¼è©•ä¾¡</li>
                             <li>å††ã®å¤§ãã•ï¼šäººæ°—ï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ä»¶æ•°ï¼‰</li>
                             <li>å³ä¸Šã‹ã¤å††ãŒå¤§ãã„ã»ã©ã€Œé«˜è©•ä¾¡Ã—äººæ°—ã€</li>
                         </ul>
                     </div>
                     <p class="mt-4 text-xs text-muted">ãƒ‡ãƒ¼ã‚¿æ›´æ–°: <span id="data-updated"></span>ï½œå‡ºå…¸: æ¥½å¤©å¸‚å ´ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï½œç®—å‡º: ä¾¡æ ¼ãƒ»è©•ä¾¡ãƒ»äººæ°—ã®ç·åˆ</p>
                 </div>
            </details>
        </section>

        <!-- é¸ã³æ–¹ã‚¬ã‚¤ãƒ‰ -->
        <section id="selection-guide" class="mb-10 md:mb-14">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-6">ãƒãƒã®ãŸã‚ã®å•†å“é¸ã³ã‚¬ã‚¤ãƒ‰</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div id="guide-popular" role="button" tabindex="0" aria-label="äººæ°—é‡è¦–ã§ä¸¦ã¹æ›¿ãˆã‚‹" class="bg-white p-6 rounded-xl card-shadow cursor-pointer hover:shadow-lg focus:outline-none focus:ring-2 ring-primary">
                        <h3 class="font-bold text-primary mb-3">ğŸ‘‘ äººæ°—é‡è¦–æ´¾</h3>
                        <p class="text-sm text-gray-600 mb-2"><strong>ãŠã™ã™ã‚</strong><br>ã¾ãšã¯â€œå¤–ã•ãªã„â€å®šç•ªã‹ã‚‰é¸ã³ãŸã„æ–¹</p>
                        <p class="text-sm text-gray-600">å¤šãã®äººã«é¸ã°ã‚ŒãŸå®‰å¿ƒæ„Ÿã‚’é‡è¦–ã€‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå¤šã„ï¼è²·ã£ãŸäººãŒå¤šã„â€œå¤±æ•—ã—ã«ãã„â€é¸ã³æ–¹ã§ã™ã€‚</p>
                    </div>
                    <div id="guide-cost" role="button" tabindex="0" aria-label="ã‚³ã‚¹ãƒ‘é‡è¦–ã§ä¸¦ã¹æ›¿ãˆã‚‹" class="bg-white p-6 rounded-xl card-shadow cursor-pointer hover:shadow-lg focus:outline-none focus:ring-2 ring-primary">
                        <h3 class="font-bold text-primary mb-3">ğŸ’° ã‚³ã‚¹ãƒ‘é‡è¦–æ´¾</h3>
                        <p class="text-sm text-gray-600 mb-2"><strong>ãŠã™ã™ã‚</strong><br>ã§ãã‚‹ã ã‘å®‰ãã€ã§ã‚‚æ©Ÿèƒ½ã¯å¤–ã—ãŸããªã„æ–¹</p>
                        <p class="text-sm text-gray-600">äºˆç®—å†…ã§æº€è¶³åº¦ã‚’æœ€å¤§åŒ–ã€‚ä¾¡æ ¼ã¯æŠ‘ãˆã¤ã¤ã€å†·æ„Ÿã‚„UVãªã©ã®â€œå¿…è¦ãªæ©Ÿèƒ½â€ã¯ã—ã£ã‹ã‚Šç¢ºä¿ã—ã¾ã™ã€‚</p>
                    </div>
                    <div id="guide-quality" role="button" tabindex="0" aria-label="å“è³ªé‡è¦–ã§ä¸¦ã¹æ›¿ãˆã‚‹" class="bg-white p-6 rounded-xl card-shadow cursor-pointer hover:shadow-lg focus:outline-none focus:ring-2 ring-primary">
                        <h3 class="font-bold text-primary mb-3">â­ å“è³ªé‡è¦–æ´¾</h3>
                        <p class="text-sm text-gray-600 mb-2"><strong>ãŠã™ã™ã‚</strong><br>é•·ãä½¿ãˆã‚‹â€œã„ã„ã‚‚ã®â€ã‚’1æšã»ã—ã„æ–¹</p>
                        <p class="text-sm text-gray-600">è©•ä¾¡ã®é«˜ã•ã‚’æœ€å„ªå…ˆã€‚å¤šå°‘ä¾¡æ ¼ãŒä¸ŠãŒã£ã¦ã‚‚ã€ç€å¿ƒåœ°ã¨è€ä¹…æ€§ã§å…ƒãŒå–ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã‚’ç‹™ã„ã¾ã™ã€‚</p>
                    </div>
                </div>
                <p class="text-center text-xs text-muted mt-3">ãƒ’ãƒ³ãƒˆï¼šå„ã‚«ãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ä¸€è¦§ã«åæ˜ ã•ã‚Œã¾ã™</p>
            </div>
        </section>

        <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å£°ï¼ˆã‚¨ãƒ¢ãƒ¼ã‚·ãƒ§ãƒŠãƒ«è¦ç´ ï¼‰ -->
        <section id="testimonials" class="mb-10 md:mb-16">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-6">å…ˆè¼©ãƒãƒã®ãƒªã‚¢ãƒ«ãªå£°</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <blockquote class="testimonial bg-white p-5 rounded-xl card-shadow text-sm leading-relaxed cursor-pointer" data-query="UV ä½“å‹ã‚«ãƒãƒ¼">
                        <p class="mb-2">ã€Œä¿è‚²åœ’ã®é€è¿ã‚„å…¬åœ’ã§ã‚‚ä½¿ãˆã‚‹ã€‚æ—¥å·®ã—å¯¾ç­–ã¨ä½“å‹ã‚«ãƒãƒ¼ãŒåŒæ™‚ã«å¶ã„ã¾ã—ãŸã€‚ã€</p>
                        <footer class="text-xs text-muted">30ä»£ãƒ»2å…ã®ãƒãƒ</footer>
                    </blockquote>
                    <blockquote class="testimonial bg-white p-5 rounded-xl card-shadow text-sm leading-relaxed cursor-pointer" data-query="ãƒ«ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ æ´—æ¿¯ å®‰ã„">
                        <p class="mb-2">ã€Œ1,000å††å°ã§ã“ã®ã‚¯ã‚ªãƒªãƒ†ã‚£ã¯ååˆ†ã€‚æ´—æ¿¯ã«å¼·ãã¦æ¯æ—¥ãƒ˜ãƒ“ãƒ­ãƒ†ã—ã¦ã„ã¾ã™ã€‚ã€</p>
                        <footer class="text-xs text-muted">40ä»£ãƒ»å°å­¦ç”Ÿãƒãƒ</footer>
                    </blockquote>
                    <blockquote class="testimonial bg-white p-5 rounded-xl card-shadow text-sm leading-relaxed cursor-pointer" data-query="ã‚µã‚¤ã‚º ä¼¸ç¸® ãƒ‘ãƒ³ãƒ„">
                        <p class="mb-2">ã€Œã‚µã‚¤ã‚ºå±•é–‹ãŒè±Šå¯Œã§å®‰å¿ƒã€‚ãƒ¬ãƒ“ãƒ¥ãƒ¼é€šã‚Šã®ç€å¿ƒåœ°ã§ã€è²·ã£ã¦ã‚ˆã‹ã£ãŸã§ã™ã€‚ã€</p>
                        <footer class="text-xs text-muted">20ä»£ãƒ»ãƒ¯ãƒ¼ãƒãƒ</footer>
                    </blockquote>
                </div>
                <p class="text-center text-xs text-muted mt-3">ãƒ’ãƒ³ãƒˆï¼šã‚¿ãƒƒãƒ—ã§é–¢é€£æ¡ä»¶ã®ä¸€è¦§ã«ã‚¸ãƒ£ãƒ³ãƒ—ã—ã¾ã™</p>
            </div>
        </section>
        
        <section id="interactive-selection" class="mb-16 md:mb-24">
            <div class="max-w-3xl mx-auto text-center mb-8">
                <h2 class="text-2xl md:text-3xl font-bold mb-4">ã‚ãªãŸã®ä¾¡å€¤è¦³ã§é¸ã¶ï¼šå•†å“ä¸€è¦§</h2>
                <p class="text-lg md:text-xl leading-relaxed mb-8 text-gray-700">
                    ç›®çš„ã«åˆã‚ã›ã¦ä¸¦ã³æ›¿ãˆã§ãã¾ã™ã€‚<br class="hidden md:block">ã€Œè¿·ã£ãŸã‚‰äººæ°—é †ã€ã€Œå®‰ãè³¢ãã¯ä¾¡æ ¼é †ã€ã€Œé•·ãä½¿ã†ãªã‚‰è©•ä¾¡é †ã€ã€‚
                </p>
                <div class="flex flex-col sm:flex-row justify-center gap-4" role="tablist" aria-label="ä¸¦ã³æ›¿ãˆ">
                    <button id="btn-sort-rank" role="tab" aria-selected="true" class="w-full sm:w-auto bg-primary text-white font-bold py-3 px-8 rounded-full transition-all transform-gpu hover:scale-105 card-shadow-hover ring-2 ring-offset-2 ring-primary">
                        ğŸ‘‘ äººæ°—ãƒ©ãƒ³ã‚­ãƒ³ã‚°é †
                    </button>
                    <button id="btn-sort-price" role="tab" aria-selected="false" class="w-full sm:w-auto bg-accent text-white font-bold py-3 px-8 rounded-full transition-all transform-gpu hover:scale-105 card-shadow-hover">
                        ğŸ’° ä¾¡æ ¼ãŒå®‰ã„é †
                    </button>
                    <button id="btn-sort-review" role="tab" aria-selected="false" class="w-full sm:w-auto bg-accent text-white font-bold py-3 px-8 rounded-full transition-all transform-gpu hover:scale-105 card-shadow-hover">
                        â­ è©•ä¾¡ãŒé«˜ã„é †
                    </button>
                </div>
            </div>

            <div id="results-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8">
                <!-- å•†å“ã‚«ãƒ¼ãƒ‰ãŒã“ã“ã«å‹•çš„ã«æŒ¿å…¥ã•ã‚Œã¾ã™ -->
            </div>
        </section>
        
        <!-- FAQã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section id="faq" class="max-w-4xl mx-auto mb-16 md:mb-20">
            <h2 class="text-2xl md:text-3xl font-bold text-center mb-4">ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆFAQï¼‰</h2>
            <div class="flex justify-center gap-2 mb-6">
                <button id="btn-faq-open-all" class="btn border px-4 py-3 rounded-lg text-sm">ã™ã¹ã¦é–‹ã</button>
                <button id="btn-faq-close-all" class="btn border px-4 py-3 rounded-lg text-sm">ã™ã¹ã¦é–‰ã˜ã‚‹</button>
            </div>
            <div class="space-y-4">
                <details class="bg-white rounded-xl card-shadow">
                    <summary class="list-none cursor-pointer p-4 md:p-6 flex items-center justify-between">
                        <span class="font-semibold text-primary">å­è‚²ã¦ä¸­ã§ã‚‚ä½¿ã„ã‚„ã™ã„ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã®ç‰¹å¾´ã¯ï¼Ÿ</span>
                        <span class="text-2xl text-muted" aria-hidden="true">ï¼‹</span>
                    </summary>
                    <div class="px-4 md:px-6 pb-4 md:pb-6 text-gray-700 leading-relaxed text-base">
                        <p><strong>æ©Ÿèƒ½æ€§é‡è¦–ï¼š</strong>UVã‚«ãƒƒãƒˆãƒ»æ¥è§¦å†·æ„Ÿãƒ»ã‚¹ãƒˆãƒ¬ãƒƒãƒæ€§ãƒ»æ´—æ¿¯ã®ã—ã‚„ã™ã•ãªã©ã€å®Ÿç”¨æ€§ã‚’é‡è¦–ã—ãŸæ©Ÿèƒ½ã€‚</p>
                        <p class="mt-2"><strong>ä½“å‹ã‚«ãƒãƒ¼ï¼š</strong>æˆä¹³ã—ã‚„ã™ã„ãƒ‡ã‚¶ã‚¤ãƒ³ã€æ°—ã«ãªã‚‹éƒ¨åˆ†ã‚’éš ã›ã‚‹ã‚·ãƒ«ã‚¨ãƒƒãƒˆã€å‹•ãã‚„ã™ã•ã‚’è€ƒæ…®ã—ãŸä½œã‚Šã€‚</p>
                        <p class="mt-2"><strong>é«˜ã‚³ã‚¹ãƒ‘ï¼š</strong>ç‰¹ã«1,000å††ï½2,000å††å°ã®ä¾¡æ ¼å¸¯ã§ã€é©šãã»ã©ã®æ©Ÿèƒ½æ€§ã‚’å®Ÿç¾ã—ãŸã‚¢ã‚¤ãƒ†ãƒ ãŒäººæ°—ã§ã™ã€‚</p>
                    </div>
                </details>
                
                <details class="bg-white rounded-xl card-shadow">
                    <summary class="list-none cursor-pointer p-4 md:p-6 flex items-center justify-between">
                        <span class="font-semibold text-primary">ã“ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®é¸å®šåŸºæº–ã¯ï¼Ÿ</span>
                        <span class="text-2xl text-muted" aria-hidden="true">ï¼‹</span>
                    </summary>
                    <div class="px-4 md:px-6 pb-4 md:pb-6 text-gray-700 leading-relaxed text-base">
                        <p>æ¥½å¤©å¸‚å ´ã®å®Ÿéš›ã®è²©å£²ãƒ‡ãƒ¼ã‚¿ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•°ãŒ1ä¸‡ä»¶ã‚’è¶…ãˆã‚‹å•†å“ã‚’ä¸­å¿ƒã«åˆ†æã€‚ä»¥ä¸‹ã®3ã¤ã®è¦ç´ ã‚’ç·åˆã—ãŸç‹¬è‡ªã‚¹ã‚³ã‚¢ã§é¸å®šã—ã¦ã„ã¾ã™ï¼š</p>
                        <ul class="mt-2 space-y-1 ml-4">
                            <li>â€¢ <strong>ä¾¡æ ¼ï¼ˆã‚³ã‚¹ãƒ‘ï¼‰ï¼š</strong>34% - å®¶è¨ˆã«å„ªã—ã„ä¾¡æ ¼è¨­å®š</li>
                            <li>â€¢ <strong>è©•ä¾¡ï¼ˆå“è³ªï¼‰ï¼š</strong>33% - å®Ÿéš›ã®è³¼å…¥è€…ã®æº€è¶³åº¦</li>
                            <li>â€¢ <strong>äººæ°—ï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼æ•°ï¼‰ï¼š</strong>33% - å®Ÿéš›ã®è²©å£²å®Ÿç¸¾</li>
                        </ul>
                        <p class="mt-2">ç‰¹ã«æ©Ÿèƒ½æ€§ãƒ»ä½“å‹ã‚«ãƒãƒ¼åŠ›ãƒ»ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’é‡è¦–ã—ã€å­è‚²ã¦ä¸–ä»£ã«æœ¬å½“ã«é¸ã°ã‚Œã¦ã„ã‚‹å•†å“ã®ã¿ã‚’å³é¸ã—ã¾ã—ãŸã€‚</p>
                    </div>
                </details>
                
                <details class="bg-white rounded-xl card-shadow">
                    <summary class="list-none cursor-pointer p-4 md:p-6 flex items-center justify-between">
                        <span class="font-semibold text-primary">å•†å“ã®ä¾¡æ ¼ã‚„åœ¨åº«ã¯æœ€æ–°ã§ã™ã‹ï¼Ÿ</span>
                        <span class="text-2xl text-muted" aria-hidden="true">ï¼‹</span>
                    </summary>
                    <div class="px-4 md:px-6 pb-4 md:pb-6 text-gray-700 leading-relaxed text-base">
                        <p><strong>ä¾¡æ ¼ãƒ»åœ¨åº«ã¯å¤‰å‹•ã—ã¾ã™ã€‚</strong>æœ€æ–°ã®ä¾¡æ ¼ãƒ»åœ¨åº«çŠ¶æ³ã¯å„å•†å“ã®ãƒªãƒ³ã‚¯å…ˆï¼ˆæ¥½å¤©å¸‚å ´ï¼‰ã§ã”ç¢ºèªãã ã•ã„ã€‚</p>
                        <p class="mt-2">å½“ã‚µã‚¤ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã¯å®šæœŸçš„ã«æ›´æ–°ã—ã¦ã„ã¾ã™ãŒã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ç‰¹ã«ã‚»ãƒ¼ãƒ«æœŸé–“ä¸­ã¯ä¾¡æ ¼ãŒå¤§å¹…ã«å¤‰å‹•ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã®ã§ã€è³¼å…¥å‰ã«å¿…ãšå…¬å¼ã‚µã‚¤ãƒˆã§ã”ç¢ºèªãã ã•ã„ã€‚</p>
                    </div>
                </details>
                
                <details class="bg-white rounded-xl card-shadow">
                    <summary class="list-none cursor-pointer p-4 md:p-6 flex items-center justify-between">
                        <span class="font-semibold text-primary">ã‚µã‚¤ã‚ºé¸ã³ã§å¤±æ•—ã—ãªã„ã‚³ãƒ„ã¯ï¼Ÿ</span>
                        <span class="text-2xl text-muted" aria-hidden="true">ï¼‹</span>
                    </summary>
                    <div class="px-4 md:px-6 pb-4 md:pb-6 text-gray-700 leading-relaxed text-base">
                        <p>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³è³¼å…¥ã§æœ€ã‚‚å¤±æ•—ã—ã‚„ã™ã„ã‚µã‚¤ã‚ºé¸ã³ã€‚ä»¥ä¸‹ã®ãƒã‚¤ãƒ³ãƒˆã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ï¼š</p>
                        <ul class="mt-2 space-y-1 ml-4">
                            <li>â€¢ <strong>ã‚µã‚¤ã‚ºè¡¨ã‚’å¿…ãšç¢ºèªï¼š</strong>ãƒ–ãƒ©ãƒ³ãƒ‰ã”ã¨ã«ã‚µã‚¤ã‚ºæ„ŸãŒç•°ãªã‚Šã¾ã™</li>
                            <li>â€¢ <strong>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯ï¼š</strong>ã€Œå¤§ãã‚ã€ã€Œå°ã•ã‚ã€ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã«</li>
                            <li>â€¢ <strong>ä¼¸ç¸®æ€§ã®ã‚ã‚‹ç´ æã‚’é¸ã¶ï¼š</strong>å¤šå°‘ã®ã‚µã‚¤ã‚ºèª¤å·®ã‚’ã‚«ãƒãƒ¼</li>
                            <li>â€¢ <strong>è¿”å“ãƒ»äº¤æ›å¯èƒ½ã‹ç¢ºèªï¼š</strong>ä¸‡ä¸€ã®å ´åˆã®å®‰å¿ƒæ„Ÿ</li>
                        </ul>
                    </div>
                </details>
            </div>
        </section>

        <section id="conclusion" class="max-w-3xl mx-auto text-center mt-12">
             <h2 class="text-2xl md:text-3xl font-bold mb-4">ã¾ã¨ã‚ï¼šãƒãƒãŒé¸ã¶ã€2025å¹´ã®ãƒˆãƒ¬ãƒ³ãƒ‰</h2>
             <div id="recommendation-text" class="bg-white p-6 md:p-8 rounded-2xl card-shadow text-left leading-relaxed">
                <p class="font-bold text-lg mb-3 text-center">2025å¹´å¤ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ã€Œé«˜æ©Ÿèƒ½ãƒ»ä½“å‹ã‚«ãƒãƒ¼ãƒ»é«˜ã‚³ã‚¹ãƒ‘ã€</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-bold text-green-800 mb-2">ãƒ¡ãƒªãƒƒãƒˆï¼ˆã„ã„ã¨ã“ã‚ï¼‰</h4>
                        <ul class="text-sm space-y-1 text-green-700">
                            <li>â€¢ æ©Ÿèƒ½æ€§ã¨ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ä¸¡ç«‹ï¼ˆUVãƒ»å†·æ„Ÿãƒ»ä½“å‹ã‚«ãƒãƒ¼ï¼‰</li>
                            <li>â€¢ 1,000ï½2,000å††å°ä¸­å¿ƒã§ã‚³ã‚¹ãƒ‘è‰¯ã—</li>
                            <li>â€¢ å­è‚²ã¦ä¸­ã®â€œå‹•ãã‚„ã™ã•ãƒ»æ´—æ¿¯ã®ã—ã‚„ã™ã•â€ã«åˆã†</li>
                            <li>â€¢ é•·ãä½¿ãˆã‚‹è€ä¹…æ€§ã¨ç€å¿ƒåœ°</li>
                        </ul>
                    </div>
                    <div class="bg-orange-50 p-4 rounded-lg">
                        <h4 class="font-bold text-orange-800 mb-2">æ³¨æ„ç‚¹ï¼ˆæ°—ã‚’ã¤ã‘ãŸã„ã“ã¨ï¼‰</h4>
                        <ul class="text-sm space-y-1 text-orange-700">
                            <li>â€¢ ã‚µã‚¤ã‚ºã¯ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã€Œå¤§ãã‚/å°ã•ã‚ã€ã‚’è¦ç¢ºèª</li>
                            <li>â€¢ ä¾¡æ ¼ãƒ»åœ¨åº«ã¯å¤‰å‹•ã€‚è³¼å…¥å‰ã«ãƒªãƒ³ã‚¯å…ˆã§æœ€æ–°ã‚’ãƒã‚§ãƒƒã‚¯</li>
                            <li>â€¢ äººæ°—è‰²ã¯æ—©ã‚ã«å®Œå£²ã—ãŒã¡</li>
                            <li>â€¢ ã‚»ãƒ¼ãƒ«æ™‚ã¯ä¾¡æ ¼ãŒä¸Šä¸‹ã—ã‚„ã™ã„</li>
                        </ul>
                    </div>
                </div>
                
                <p class="text-center text-gray-600">ã‚ãªãŸã®ä¾¡å€¤è¦³ã«åˆã†ä¸€ç€ãŒã€ã“ã®TOP10ã®ä¸­ã«ãã£ã¨ã‚ã‚Šã¾ã™ã€‚<br>å¿™ã—ã„æ¯æ—¥ã‚’â€œãƒ©ã‚¯ã—ã¦ãã‚Œã„è¦‹ãˆâ€ã«å¤‰ãˆã‚‹ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚’è¦‹ã¤ã‘ã¾ã—ã‚‡ã†ã€‚</p>
             </div>
        </section>

        <!-- ã‚·ã‚§ã‚¢ãƒãƒ¼ï¼ˆãƒœãƒˆãƒ ï¼‰ -->
        <section id="share-bottom" class="max-w-4xl mx-auto mt-10 md:mt-14" aria-label="ã“ã®è¨˜äº‹ã‚’å…±æœ‰ï¼ˆè¨˜äº‹æœ«å°¾ï¼‰">
            <div class="bg-white dark:bg-opacity-80 backdrop-blur-sm p-3 sm:p-4 rounded-2xl card-shadow">
                <div class="share-bar" role="group" aria-label="å…±æœ‰ãƒœã‚¿ãƒ³">
                    <button type="button" class="btn share-chip text-sm" data-share-action="native" aria-label="OSã®å…±æœ‰ã‚·ãƒ¼ãƒˆã‚’é–‹ã">
                        <span class="icon-bg" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3v10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M8 7l4-4 4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><rect x="4" y="11" width="16" height="9" rx="2" stroke="currentColor" stroke-width="2"/></svg>
                        </span>
                        OSã§å…±æœ‰
                    </button>
                    <button type="button" class="btn share-chip text-sm" data-share-action="x" aria-label="Xã§ã‚·ã‚§ã‚¢">
                        <span class="icon-bg" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M4 4h4l4 6 4-6h4l-6.5 9L20 20h-4l-4-6-4 6H4l6.5-9L4 4z"/></svg>
                        </span>
                        Xã§ã‚·ã‚§ã‚¢
                    </button>
                    <button type="button" class="btn share-chip text-sm" data-share-action="line" aria-label="LINEã§é€ã‚‹">
                        <span class="icon-bg" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M20 11c0 4.418-4.03 8-9 8-1.036 0-2.03-.145-2.95-.412L4 20l1.59-3.18C4.62 15.53 4 13.83 4 12c0-4.418 4.03-8 9-8s7 3.582 7 7z"/><path fill="#fff" d="M9 9h2v6H9zM12.5 9H15c1.2 0 2 .8 2 2s-.8 2-2 2h-1v2h-1.5V9zm1.5 1.5V12h1c.4 0 .5-.3.5-.5s-.1-.5-.5-.5h-1z"/></svg>
                        </span>
                        LINEã§é€ã‚‹
                    </button>
                    <button type="button" class="btn share-chip text-sm" data-share-action="copy" aria-label="ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼">
                        <span class="icon-bg" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 17a4 4 0 0 1 0-6l4-4a4 4 0 1 1 6 6l-1 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 7a4 4 0 0 1 0 6l-4 4a4 4 0 1 1-6-6l1-1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        </span>
                        ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼
                    </button>
                </div>
            </div>
        </section>

        <!-- ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å…±æœ‰ï¼ˆã‚¹ãƒãƒ›ï¼‰ -->
        <div class="floating-left" id="share-fab-wrap" style="display:none;">
            <div id="share-fab-menu" class="hidden bg-white dark:bg-opacity-90 backdrop-blur-sm border rounded-2xl card-shadow p-2 flex flex-col gap-2" style="min-width: 220px; margin-bottom: 10px;">
                <button type="button" class="btn share-chip text-sm" data-share-action="x"><span class="icon-bg"><svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M4 4h4l4 6 4-6h4l-6.5 9L20 20h-4l-4-6-4 6H4l6.5-9L4 4z"/></svg></span>Xã§ã‚·ã‚§ã‚¢</button>
                <button type="button" class="btn share-chip text-sm" data-share-action="line"><span class="icon-bg"><svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M20 11c0 4.418-4.03 8-9 8-1.036 0-2.03-.145-2.95-.412L4 20l1.59-3.18C4.62 15.53 4 13.83 4 12c0-4.418 4.03-8 9-8s7 3.582 7 7z"/><path fill="#fff" d="M9 9h2v6H9zM12.5 9H15c1.2 0 2 .8 2 2s-.8 2-2 2h-1v2h-1.5V9zm1.5 1.5V12h1c.4 0 .5-.3.5-.5s-.1-.5-.5-.5h-1z"/></svg></span>LINEã§é€ã‚‹</button>
                <button type="button" class="btn share-chip text-sm" data-share-action="copy"><span class="icon-bg"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 17a4 4 0 0 1 0-6l4-4a4 4 0 1 1 6 6l-1 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 7a4 4 0 0 1 0 6l-4 4a4 4 0 1 1-6-6l1-1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span>ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼</button>
            </div>
            <button id="btn-share-fab" class="fab btn bg-primary text-white rounded-full card-shadow-hover" style="width:56px;height:56px;display:flex;align-items:center;justify-content:center;">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="26" height="26"><path d="M12 5v10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M8 9l4-4 4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><rect x="4" y="13" width="16" height="7" rx="2" stroke="currentColor" stroke-width="2"/></svg>
            </button>
        </div>

        <!-- æ¯”è¼ƒãƒãƒ¼ï¼ˆstickyï¼‰ -->
        <div id="compare-bar" class="sticky-bar max-w-4xl mx-auto mt-6 hidden">
            <div class="bg-white rounded-2xl card-shadow p-3 md:p-4 flex items-center gap-3">
                <div class="text-sm flex-1"><span id="compare-count">0</span> ä»¶é¸æŠä¸­ï¼ˆæœ€å¤§3ä»¶ï¼‰</div>
                <div class="flex gap-2">
                    <button id="btn-compare" class="btn bg-primary text-white px-4 py-2 rounded-xl disabled:opacity-40" disabled>ğŸ” æ¯”è¼ƒã™ã‚‹</button>
                    <button id="btn-compare-clear" class="btn border px-4 py-2 rounded-xl">ã‚¯ãƒªã‚¢</button>
                </div>
            </div>
        </div>

    </div>

    <!-- ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
    <button id="btn-back-to-top" class="floating btn-cta text-white px-4 py-3 rounded-full card-shadow-hover" aria-label="ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã¸æˆ»ã‚‹" style="display:none;">â†‘ ãƒˆãƒƒãƒ—</button>

    <script>
        // ------- ãƒ‡ãƒ¼ã‚¿å®šç¾©
        const productsData = [
          {
            "rank": 1, "itemName": "ï¼¼18ï¼…OFFã‚¯ãƒ¼ãƒãƒ³ï¼UV ãƒ‘ãƒ¼ã‚«ãƒ¼ å†·æ„Ÿ -7â„ƒ", "itemPrice": 1980, "reviewCount": 13633, "reviewAverage": 4.33, "affiliateUrl": "https://hb.afl.rakuten.co.jp/hgc/g00tgx3k.qgo2xc2d.g00tgx3k.qgo2y170/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fnityukan0715%2Fqqdou7009a%2F&rafcid=wsc_i_ra_1014243036473883403",
            "imageUrl": "https://thumbnail.image.rakuten.co.jp/@0_mall/nityukan0715/cabinet/10771143/chenai4t_01n.jpg?_ex=128x128", "catchcopy": "ç´«å¤–ç·šé®è”½ç‡99ï¼…ï¼è»½ã‚„ã‹ãªå†·æ„Ÿç´ æã§å¿«é©ã‚­ãƒ¼ãƒ—", "description": "æ „ãˆã‚ã‚‹ç¬¬1ä½ã€‚UPF50+ã€æ¥è§¦å†·æ„Ÿã€é€šæ°—æ€§ã€å–ã‚Šå¤–ã—å¯èƒ½ãªã‚µãƒ³ãƒã‚¤ã‚¶ãƒ¼ã¾ã§å‚™ãˆãŸã€Œç€ã‚‹æ—¥ç„¼ã‘æ­¢ã‚ã€ã€‚åœ§å€’çš„ãªæ©Ÿèƒ½æ€§ã¨1ä¸‡ä»¶ã‚’è¶…ãˆã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•°ãŒãã®å®ŸåŠ›ã‚’è¨¼æ˜ã—ã¦ã„ã¾ã™ã€‚å¤ã®ã‚ã‚‰ã‚†ã‚‹ã‚·ãƒ¼ãƒ³ã§æ´»èºã™ã‚‹æœ€å¼·ã®ä¸€æšã§ã™ã€‚"
          },
          {
            "rank": 2, "itemName": "ã€ã‚¯ãƒ¼ãƒãƒ³åˆ©ç”¨ã€‘ä½“å‹ã‚«ãƒãƒ¼æ°´ç€5ç‚¹ã‚»ãƒƒãƒˆ", "itemPrice": 7580, "reviewCount": 568, "reviewAverage": 4.23, "affiliateUrl": "https://hb.afl.rakuten.co.jp/hgc/g00qqehk.qgo2x195.g00qqehk.qgo2ye8e/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Ftouhuzi%2Fvikir5189%2F&rafcid=wsc_i_ra_1014243036473883403",
            "imageUrl": "https://thumbnail.image.rakuten.co.jp/@0_mall/touhuzi/cabinet/aka_sam/vikir5189_os_aka20.jpg?_ex=128x128", "catchcopy": "æ°´é™¸ä¸¡ç”¨ï¼ã½ã£ã¡ã‚ƒã‚Šã•ã‚“ã‚‚å®‰å¿ƒã®5ç‚¹ã‚»ãƒƒãƒˆ", "description": "ãƒ©ãƒƒã‚·ãƒ¥ã‚¬ãƒ¼ãƒ‰ã‹ã‚‰ãƒ¬ã‚®ãƒ³ã‚¹ã¾ã§å…¨ã¦æƒã£ãŸè±ªè¯5ç‚¹ã‚»ãƒƒãƒˆã€‚æ°—ã«ãªã‚‹éƒ¨åˆ†ã‚’å®Œç’§ã«ã‚«ãƒãƒ¼ã—ã¤ã¤ã€ã‚¹ã‚¿ã‚¤ãƒªãƒƒã‚·ãƒ¥ã«è¦‹ãˆã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ãŒé­…åŠ›ã€‚UVã‚«ãƒƒãƒˆç‡ã‚‚99.9%ä»¥ä¸Šã§ã€æ°´è¾ºã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’å­˜åˆ†ã«æ¥½ã—ã‚ã¾ã™ã€‚"
          },
          {
            "rank": 3, "itemName": "UVã‚«ãƒƒãƒˆç‡99%ä»¥ä¸Š ã‚¿ãƒ³ã‚­ãƒ‹æ°´ç€4ç‚¹ã‚»ãƒƒãƒˆ", "itemPrice": 4780, "reviewCount": 2521, "reviewAverage": 4.26, "affiliateUrl": "https://hb.afl.rakuten.co.jp/hgc/g00r62fk.qgo2xdf0.g00r62fk.qgo2y08a/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fteddyshop%2Fhys2861%2F&rafcid=wsc_i_ra_1014243036473883403",
            "imageUrl": "https://thumbnail.image.rakuten.co.jp/@0_mall/teddyshop/cabinet/mizugi40/hys2861x1tr_6.jpg?_ex=128x128", "catchcopy": "æ°—è² ã‚ãªã„ãƒ˜ãƒ«ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‡ï¼æ´‹æœã¿ãŸã„ãªæ°´ç€ã‚»ãƒƒãƒˆ", "description": "ãƒˆãƒ¬ãƒ³ãƒ‰ã®ãƒ“ã‚¹ãƒã‚§é¢¨ãƒ‡ã‚¶ã‚¤ãƒ³ãŒãŠæ´’è½ãª4ç‚¹ã‚»ãƒƒãƒˆã€‚æ´‹æœæ„Ÿè¦šã§ç€ã‚‰ã‚Œã‚‹ã®ã§ã€æ°´ç€ã«æŠµæŠ—ãŒã‚ã‚‹æ–¹ã«ã‚‚ãŠã™ã™ã‚ã€‚é•·è¢–ã‚·ãƒ£ãƒ„ã¨ãƒãƒ¼ãƒ•ãƒ‘ãƒ³ãƒ„ã§éœ²å‡ºã‚’æŠ‘ãˆã¤ã¤ã€ã—ã£ã‹ã‚Šã¨ä½“å‹ã‚’ã‚«ãƒãƒ¼ã—ã¦ãã‚Œã¾ã™ã€‚"
          },
          {
            "rank": 4, "itemName": "ï¼¼å…ˆç€1æš842å††ï¼ï¼ã•ã‚‰ã¦ã‚ãƒ«ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ä¸Šä¸‹ã‚»ãƒƒãƒˆ", "itemPrice": 990, "reviewCount": 9283, "reviewAverage": 4.33, "affiliateUrl": "https://hb.afl.rakuten.co.jp/hgc/g00q8qjk.qgo2xf81.g00q8qjk.qgo2ycff/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fdarkangel%2Fto2305-1114%2F&rafcid=wsc_i_ra_1014243036473883403",
            "imageUrl": "https://thumbnail.image.rakuten.co.jp/@0_mall/darkangel/cabinet/11667147/07/1114-main-250723-2.jpg?_ex=128x128", "catchcopy": "ï¼¼ãƒ­ãƒ³ã‚°ã‚»ãƒ©ãƒ¼ï¼ãƒªãƒ–ç”Ÿåœ°ãƒ«ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ä¸Šä¸‹ã‚»ãƒƒãƒˆ", "description": "è‚Œã«é¦´æŸ“ã‚€ã€Œã•ã‚‰ã¦ã‚ã€æ„ŸãŒã‚„ã¿ã¤ãã«ãªã‚‹ãƒ«ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã€‚è£¾ã‚’è‡ªåˆ†ã§ã‚«ãƒƒãƒˆã§ãã‚‹ã®ã§ã€ã©ã‚“ãªèº«é•·ã®äººã«ã‚‚ãƒ•ã‚£ãƒƒãƒˆã—ã¾ã™ã€‚ãƒªãƒ©ãƒƒã‚¯ã‚¹ã§ãã‚‹ç€å¿ƒåœ°ã¨å¯æ„›ã„ãƒ‡ã‚¶ã‚¤ãƒ³ã§ã€ãŠã†ã¡æ™‚é–“ã‚’æ ¼ä¸Šã’ã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã§ã™ã€‚"
          },
          {
            "rank": 5, "itemName": "ã€ã‚¯ãƒ¼ãƒãƒ³ã§2,450å††ã€‘æ¥è§¦å†·æ„Ÿã‚¹ãƒˆãƒ©ã‚¤ãƒ—ãƒ¯ã‚¤ãƒ‰ãƒ‘ãƒ³ãƒ„", "itemPrice": 4900, "reviewCount": 257, "reviewAverage": 4.53, "affiliateUrl": "https://hb.afl.rakuten.co.jp/hgc/g00synkk.qgo2xe94.g00synkk.qgo2y989/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fsljapan1%2Fsa9517%2F&rafcid=wsc_i_ra_1014243036473883403",
            "imageUrl": "https://thumbnail.image.rakuten.co.jp/@0_mall/sljapan1/cabinet/07985602/sa9517/sa9517_top2.jpg?_ex=128x128", "catchcopy": "ï¼¼æ¥½å¤©1ä½ï¼6å† é”æˆï¼é¸ã¹ã‚‹ä¸ˆã®ã²ã‚“ã‚„ã‚Šã‚¹ãƒˆãƒ©ã‚¤ãƒ—ãƒ‘ãƒ³ãƒ„", "description": "ç©¿ã„ãŸç¬é–“ã²ã‚“ã‚„ã‚Šã™ã‚‹æ¥è§¦å†·æ„Ÿç´ æã§ã€å¤ã«æœ€é©ãªãƒ¯ã‚¤ãƒ‰ãƒ‘ãƒ³ãƒ„ã€‚ç¸¦ã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ—æŸ„ãŒè„šé•·åŠ¹æœã‚’æ¼”å‡ºã—ã€ã‚†ã£ãŸã‚Šã‚·ãƒ«ã‚¨ãƒƒãƒˆã§ä½“å‹ã‚‚ã‚«ãƒãƒ¼ã€‚æ¥½ã¡ã‚“ãªã®ã«ã‚­ãƒ¬ã‚¤ã‚ã«è¦‹ãˆã‚‹ã€å¤§äººã®ãŸã‚ã®ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ‘ãƒ³ãƒ„ã§ã™ã€‚"
          },
          {
            "rank": 6, "itemName": "UVã‚«ãƒƒãƒˆç‡99%ä»¥ä¸Š é•·è¢–ãƒ©ãƒƒã‚·ãƒ¥ã‚¬ãƒ¼ãƒ‰5ç‚¹ã‚»ãƒƒãƒˆ", "itemPrice": 4480, "reviewCount": 6803, "reviewAverage": 4.38, "affiliateUrl": "https://hb.afl.rakuten.co.jp/hgc/g00r62fk.qgo2xdf0.g00r62fk.qgo2y08a/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fteddyshop%2Fhys2128%2F&rafcid=wsc_i_ra_1014243036473883403",
            "imageUrl": "https://thumbnail.image.rakuten.co.jp/@0_mall/teddyshop/cabinet/mizugi40/hys2128x1tr_2.jpg?_ex=128x128", "catchcopy": "ã—ã£ã‹ã‚Šã‚«ãƒãƒ¼ã§ãã‚‹é•·è¢–ï¼†ãƒ¬ã‚®ãƒ³ã‚¹â˜†å‹•ãã‚„ã™ã•ã‚‚â—", "description": "6000ä»¶ä»¥ä¸Šã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒä¿¡é ¼ã®è¨¼ã€‚æ—¥ç„¼ã‘å¯¾ç­–ã¨ä½“å‹ã‚«ãƒãƒ¼ã‚’ä¸¡ç«‹ã—ãŸã„ãªã‚‰ã“ã®5ç‚¹ã‚»ãƒƒãƒˆãŒæœ€é©ã€‚å‹•ãã‚„ã™ã•ã‚‚è€ƒæ…®ã•ã‚Œã¦ãŠã‚Šã€ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ã‚„æ°´ä¸­ã‚¦ã‚©ãƒ¼ã‚­ãƒ³ã‚°ã«ã‚‚å¯¾å¿œã€‚å¹…åºƒã„ã‚µã‚¤ã‚ºå±•é–‹ã‚‚é­…åŠ›ã§ã™ã€‚"
          },
          {
            "rank": 7, "itemName": "ã€Œæ–°æ„Ÿè¦šã€ç©¿ã„ã¦ã„ã¦ç–²ã‚Œãªã„ãƒ‡ãƒ‹ãƒ ãƒ‘ãƒ³ãƒ„", "itemPrice": 2999, "reviewCount": 8145, "reviewAverage": 4.5, "affiliateUrl": "https://hb.afl.rakuten.co.jp/hgc/g00s53ck.qgo2x590.g00s53ck.qgo2yac3/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fhhh-style%2Fjp144%2F&rafcid=wsc_i_ra_1014243036473883403",
            "imageUrl": "https://thumbnail.image.rakuten.co.jp/@0_mall/hhh-style/cabinet/50227/jp144-1.jpg?_ex=128x128", "catchcopy": "ã‚«ãƒ©ãƒ¼verè¿½åŠ ï¼ãƒˆãƒ¼ãƒ«ä¸ˆã‚‚é¸ã¹ã‚‹ã‚¹ãƒˆãƒ¬ãƒƒãƒãƒ‡ãƒ‹ãƒ ", "description": "æœ¬æ ¼çš„ãªè¦‹ãŸç›®ã‹ã‚‰ã¯æƒ³åƒã§ããªã„ã»ã©ã®ã‚¹ãƒˆãƒ¬ãƒƒãƒæ€§ã§ã€ä¸€æ—¥ä¸­å¿«é©ã«éã”ã›ã‚‹ã€Œç–²ã‚Œãªã„ã€ãƒ‡ãƒ‹ãƒ ã€‚ã‚†ã£ãŸã‚Šã¨ã—ãŸã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆã‚·ãƒ«ã‚¨ãƒƒãƒˆãŒä½“å‹ã‚’æ‹¾ã‚ãšã€èª°ã§ã‚‚ç¾è„šè¦‹ãˆãŒå¶ã„ã¾ã™ã€‚è±Šå¯Œãªã‚µã‚¤ã‚ºã¨ä¸ˆã‹ã‚‰é¸ã¹ã‚‹ã®ã‚‚å¬‰ã—ã„ãƒã‚¤ãƒ³ãƒˆã€‚"
          },
          {
            "rank": 8, "itemName": "2ç‚¹ã§å®Œçµï¼ãŠè…¹ãŒè¦‹ãˆãªã„ã‚¤ãƒ³ãƒŠãƒ¼ä¸€ä½“å‹æ°´ç€ã‚»ãƒƒãƒˆ", "itemPrice": 3480, "reviewCount": 372, "reviewAverage": 4.52, "affiliateUrl": "https://hb.afl.rakuten.co.jp/hgc/g00tcj3k.qgo2x72c.g00tcj3k.qgo2y354/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fdearcologne%2Fts001set%2F&rafcid=wsc_i_ra_1014243036473883403",
            "imageUrl": "https://thumbnail.image.rakuten.co.jp/@0_mall/dearcologne/cabinet/sw/ts001set-bbb.jpg?_ex=128x128", "catchcopy": "ã‚¤ãƒ³ãƒŠãƒ¼ãŒãã£ã¤ã„ãŸä¾¿åˆ©ãªã‚»ãƒ‘ãƒ¬ãƒ¼ãƒˆæ°´ç€ã‚»ãƒƒãƒˆâ™ª", "description": "ç€æ›¿ãˆãŒé¢å€’ã¨ã„ã†æ‚©ã¿ã‚’è§£æ±ºã™ã‚‹ç”»æœŸçš„ãªæ°´ç€ã€‚ãƒˆãƒƒãƒ—ã‚¹ã¨ãƒ‘ãƒ³ãƒ„ã«ã‚¤ãƒ³ãƒŠãƒ¼ãŒä¸€ä½“åŒ–ã—ã¦ãŠã‚Šã€ç€æ›¿ãˆãŒéå¸¸ã«ã‚¹ãƒ ãƒ¼ã‚ºã€‚ãŠè…¹ãŒè¦‹ãˆãªã„è¨­è¨ˆã§ã€å°ã•ãªãŠå­æ§˜ãŒã„ã‚‹ãƒãƒã«ã‚‚å®‰å¿ƒã—ã¦ç€ç”¨ã„ãŸã ã‘ã¾ã™ã€‚"
          },
          {
            "rank": 9, "itemName": "ï¼¼åŠé¡ã‚¯ãƒ¼ãƒãƒ³é…å¸ƒä¸­ï¼ï¼å®Œå…¨é˜²å‚™UVãƒ‘ãƒ¼ã‚«ãƒ¼", "itemPrice": 999, "reviewCount": 9262, "reviewAverage": 4.1, "affiliateUrl": "https://hb.afl.rakuten.co.jp/hgc/g00q8qjk.qgo2xf81.g00q8qjk.qgo2ycff/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fdarkangel%2Fotg1704-0115%2F&rafcid=wsc_i_ra_1014243036473883403",
            "imageUrl": "https://thumbnail.image.rakuten.co.jp/@0_mall/darkangel/cabinet/11667147/07/0115-main-250722.jpg?_ex=128x128", "catchcopy": "1æš3å½¹ï¼UPF50+ ç€ãŸã»ã†ãŒæ¶¼ã—ã„ã€ç¾½ç¹”ã‚‹æ—¥ç„¼ã‘æ­¢ã‚", "description": "1ä½ã®å•†å“ã¨åŒç’§ã‚’ãªã™äººæ°—ã®UVãƒ‘ãƒ¼ã‚«ãƒ¼ã€‚ã“ã¡ã‚‰ã‚‚UPF50+ã€æ¥è§¦å†·æ„Ÿã€ãƒ•ãƒ¼ãƒ‰ã€æŒ‡ç©´ä»˜ãã¨æ©Ÿèƒ½æ€§æŠœç¾¤ã€‚ç‰¹ã«ä¾¡æ ¼ã®å®‰ã•ãŒé©šç•°çš„ã§ã€ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’é‡è¦–ã™ã‚‹ãªã‚‰ã“ã‚Œä»¥ä¸Šã®é¸æŠè‚¢ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚"
          },
          {
            "rank": 10, "itemName": "ï¼¼å…ˆç€1æš1,615å††ã€œï¼é¸ã¹ã‚‹2ã‚¿ã‚¤ãƒ—ãƒã‚­ã‚·ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹", "itemPrice": 1899, "reviewCount": 3378, "reviewAverage": 4.24, "affiliateUrl": "https://hb.afl.rakuten.co.jp/hgc/g00q8qjk.qgo2xf81.g00q8qjk.qgo2ycff/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fdarkangel%2Fop2502-4732%2F&rafcid=wsc_i_ra_1014243036473883403",
            "imageUrl": "https://thumbnail.image.rakuten.co.jp/@0_mall/darkangel/cabinet/11667147/07/4732-main-250708-1.jpg?_ex=128x128", "catchcopy": "æ°—åˆ†ã§é¸ã¹ã‚‹ï¼ã‚·ãƒ³ãƒ—ãƒ«ã§å¤§äººã‹ã‚ã„ã„ãƒã‚­ã‚·ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹", "description": "1æšã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒãƒ¼ãƒˆãŒå®Œæˆã™ã‚‹ã€å¤ã®é ¼ã‚Œã‚‹ãƒã‚­ã‚·ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹ã€‚ä½“ã®ãƒ©ã‚¤ãƒ³ã‚’æ‹¾ã‚ãªã„ç¾ã—ã„ã‚·ãƒ«ã‚¨ãƒƒãƒˆã¨ã€ã•ã‚‰ã£ã¨ã—ãŸã‚¹ãƒ ãƒ¼ã‚¹ã‚³ãƒƒãƒˆãƒ³ç´ æãŒé­…åŠ›ã€‚è±Šå¯Œãªãƒ‡ã‚¶ã‚¤ãƒ³ã¨ä¸ˆã‹ã‚‰é¸ã¹ã‚‹ã®ã§ã€ç†æƒ³ã®ä¸€æšãŒè¦‹ã¤ã‹ã‚Šã¾ã™ã€‚"
          }
        ];

        const resultsContainer = document.getElementById('results-container');
        const sortButtons = {
            rank: document.getElementById('btn-sort-rank'),
            price: document.getElementById('btn-sort-price'),
            review: document.getElementById('btn-sort-review')
        };

        // è¿½åŠ UIè¦ç´ 
        const searchBox = document.getElementById('search-box');
        const priceMinInput = document.getElementById('price-min');
        const priceMaxInput = document.getElementById('price-max');
        const priceRangeQuick = document.getElementById('price-range');
        const filterRating = document.getElementById('filter-rating');
        const filterReview = document.getElementById('filter-review');
        const labelRating = document.getElementById('label-rating');
        const labelReview = document.getElementById('label-review');
        const favOnlyCheckbox = document.getElementById('filter-fav');
        const btnReset = document.getElementById('btn-reset');
        const btnSortScore = document.getElementById('btn-sort-score');
        const tagsContainer = document.getElementById('tags-container');
        const resultSummary = document.getElementById('result-summary');
        const compareBar = document.getElementById('compare-bar');
        const compareCount = document.getElementById('compare-count');
        const btnCompare = document.getElementById('btn-compare');
        const btnCompareClear = document.getElementById('btn-compare-clear');
        const btnDarkToggle = document.getElementById('btn-dark-toggle');
        const btnInstall = document.getElementById('btn-install');

        // æ¯”è¼ƒãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆå‹•çš„ç”Ÿæˆï¼‰
        const modalBackdrop = document.createElement('div');
        modalBackdrop.className = 'modal-backdrop';
        modalBackdrop.innerHTML = `
            <div class="modal p-4 md:p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold">å•†å“æ¯”è¼ƒ</h3>
                    <button id="modal-close" class="btn border px-3 py-1 rounded-lg">é–‰ã˜ã‚‹</button>
                </div>
                <div id="compare-body" class="overflow-x-auto"></div>
            </div>
        `;
        document.body.appendChild(modalBackdrop);

        // ------- ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆå…±é€šè¨­å®šï¼‰
        (function loadRoutes(){
            try {
                // æ—¢ã«èª­ã¿è¾¼ã¿æ¸ˆã¿ãªã‚‰ã‚¹ã‚­ãƒƒãƒ—
                if (!window.AppRoutes) {
                    var s = document.createElement('script');
                    s.src = '../../routes.js';
                    s.defer = false; // å…ˆã«èª­ã¿è¾¼ã¿
                    document.head.appendChild(s);
                }
            } catch {}
        })();

        // ------- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
        const debounce = (fn, ms = 250) => {
            let t; return (...args) => { clearTimeout(t); t = setTimeout(() => fn(...args), ms); };
        };
        const getFavorites = () => new Set(JSON.parse(localStorage.getItem('favorites') || '[]'));
        const setFavorites = (set) => localStorage.setItem('favorites', JSON.stringify(Array.from(set)));
        const getTheme = () => localStorage.getItem('theme');
        const setTheme = (t) => localStorage.setItem('theme', t);
        const getState = () => JSON.parse(localStorage.getItem('state') || 'null');
        const setState = (s) => localStorage.setItem('state', JSON.stringify(s));

        const productId = (p) => p.itemName; // ä¸€æ„ã¨ä»®å®š

        const inferTags = (p) => {
            const name = `${p.itemName} ${p.catchcopy}`.toLowerCase();
            const tags = new Set();
            if (name.includes('uv')) tags.add('UVã‚«ãƒƒãƒˆ');
            if (name.includes('å†·æ„Ÿ') || name.includes('ã²ã‚“ã‚„ã‚Š')) tags.add('å†·æ„Ÿ');
            if (name.includes('ãƒ¯ãƒ³ãƒ”') || name.includes('onepiece')) tags.add('ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹');
            if (name.includes('æ°´ç€') || name.includes('ãƒ©ãƒƒã‚·ãƒ¥')) tags.add('æ°´ç€');
            if (name.includes('ãƒ‘ãƒ³ãƒ„')) tags.add('ãƒ‘ãƒ³ãƒ„');
            if (name.includes('ãƒ‡ãƒ‹ãƒ ')) tags.add('ãƒ‡ãƒ‹ãƒ ');
            if (name.includes('ãƒ«ãƒ¼ãƒ ã‚¦ã‚§ã‚¢')) tags.add('ãƒ«ãƒ¼ãƒ ã‚¦ã‚§ã‚¢');
            if (name.includes('ä½“å‹ã‚«ãƒãƒ¼')) tags.add('ä½“å‹ã‚«ãƒãƒ¼');
            if (name.includes('ãƒ‘ãƒ¼ã‚«ãƒ¼')) tags.add('ãƒ‘ãƒ¼ã‚«ãƒ¼');
            return Array.from(tags);
        };

        // æ­£è¦åŒ–ç”¨ãƒ¡ãƒˆãƒªã‚¯ã‚¹
        const metrics = {
            price: { getter: p => p.itemPrice, better: 'lower' },
            rating: { getter: p => p.reviewAverage, better: 'higher' },
            reviews: { getter: p => p.reviewCount, better: 'higher' },
        };

        const state = {
            sortKey: 'rank',
            query: '',
            priceMin: 0,
            priceMax: 0,
            ratingMin: 0,
            reviewMin: 0,
            onlyFavorites: false,
            selectedTags: new Set(),
            weights: { price: 0.34, rating: 0.33, reviews: 0.33 },
        };

        let favorites = getFavorites();
        let compareSet = new Set();
        let augmented = productsData.map(p => ({ ...p, tags: inferTags(p) }));
        let priceBounds = { min: Math.min(...augmented.map(p => p.itemPrice)), max: Math.max(...augmented.map(p => p.itemPrice)) };
        state.priceMin = priceBounds.min; state.priceMax = priceBounds.max;

        // UI åˆæœŸå€¤
        priceMinInput.value = state.priceMin;
        priceMaxInput.value = state.priceMax;
        priceRangeQuick.value = 0; // 0=å…¨åŸŸã€å³ã¸è¡Œãã»ã©å®‰ä¾¡å¯„ã‚Š
        filterRating.value = state.ratingMin; labelRating.textContent = Number(state.ratingMin).toFixed(1);
        filterReview.value = state.reviewMin; labelReview.textContent = Number(state.reviewMin).toLocaleString();

        // ã‚¿ã‚°ä¸€è¦§ç”Ÿæˆ
        const allTags = Array.from(new Set(augmented.flatMap(p => p.tags))).sort();
        allTags.forEach(tag => {
            const b = document.createElement('button');
            b.className = 'chip';
            b.textContent = tag;
            b.setAttribute('aria-pressed', 'false');
            b.addEventListener('click', () => {
                if (state.selectedTags.has(tag)) { state.selectedTags.delete(tag); b.classList.remove('chip-selected'); b.setAttribute('aria-pressed', 'false'); }
                else { state.selectedTags.add(tag); b.classList.add('chip-selected'); b.setAttribute('aria-pressed', 'true'); }
                displayResults(state.sortKey);
            });
            tagsContainer.appendChild(b);
        });

        function imgUrlWithSize(url, size) {
            if (!url) return url;
            const hasQuery = url.includes('?');
            const exParam = `_ex=${size}x${size}`;
            if (/_ex=\d+x\d+/.test(url)) {
                return url.replace(/_ex=\d+x\d+/, exParam);
            }
            return url + (hasQuery ? '&' : '?') + exParam;
        }
        function buildSrcset(url) {
            const sizes = [320, 480, 640, 800, 1200];
            return sizes.map(s => `${imgUrlWithSize(url, s)} ${s}w`).join(', ');
        }
        function getProductDetailUrl(product){
            try {
                if (!window.AppRoutes) return '';
                const byName = (AppRoutes.productByName && AppRoutes.productByName[product.itemName]) || '';
                const slug = AppRoutes.slugify ? AppRoutes.slugify(product.itemName) : '';
                const bySlug = (slug && AppRoutes.products && AppRoutes.products[slug]) || '';
                const url = byName || bySlug;
                if (!url) return '';
                const from = encodeURIComponent(`${location.origin}${location.pathname}#card-${product.rank}`);
                return `${url}?from=${from}`;
            } catch { return ''; }
        }

        function createCard(product) {
            const detailUrl = getProductDetailUrl(product);
            const detailLinkHtml = detailUrl ? `<a href="${detailUrl}" class="btn border rounded-lg px-3 py-2 text-sm" style="min-width:44px;min-height:44px;" aria-label="${product.itemName} ã®è§£èª¬ãƒšãƒ¼ã‚¸ã¸">è§£èª¬</a>` : '';
            return `
                <div id="card-${product.rank}" class="bg-white rounded-2xl card-shadow card-shadow-hover transition-all transform-gpu opacity-0 translate-y-4" style="transition-delay: ${product.rank * 40}ms;">
                    <img src="${imgUrlWithSize(product.imageUrl, 640)}" srcset="${buildSrcset(product.imageUrl)}" sizes="(min-width:1024px) 320px, (min-width:768px) 45vw, 90vw" alt="${product.itemName}" width="640" height="640" class="rounded-t-2xl w-full object-contain bg-white" style="aspect-ratio: 1 / 1;" loading="lazy" decoding="async">
                    <div class="p-5 md:p-6">
                        <div class="flex justify-between items-start mb-3">
                            <div class="pr-2">
                                <p class="text-xs text-gray-500">RANK ${product.rank}</p>
                                <h3 class="font-bold text-primary leading-tight line-clamp-2" title="${product.itemName}">${product.itemName}</h3>
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="btn favorite-btn text-yellow-500 text-xl" data-id="${product.itemName}" aria-label="ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ /è§£é™¤">${favorites.has(product.itemName) ? 'â˜…' : 'â˜†'}</button>
                            <span class="text-xl font-bold text-accent whitespace-nowrap">Â¥${product.itemPrice.toLocaleString()}</span>
                            </div>
                        </div>
                        <div class="text-base space-y-2 mb-4">
                            <p class="text-gray-700">${product.catchcopy}</p>
                            <div class="flex items-center gap-4 text-sm">
                                <span class="bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">â­ ${product.reviewAverage}</span>
                                <span class="text-gray-500">âœï¸ ${product.reviewCount.toLocaleString()}ä»¶</span>
                            </div>
                        </div>
                        <div class="flex flex-wrap gap-2 mb-3">
                            ${product.tags.map(t => `<span class="chip">${t}</span>`).join('')}
                        </div>
                         <div id="details-${product.rank}" class="text-base leading-relaxed text-gray-700 bg-stone-50 p-3 rounded-lg hidden mb-4">
                            <p>${product.description}</p>
                        </div>
                        <button onclick="toggleDetails(${product.rank})" class="w-full text-center bg-primary text-white font-bold py-3 rounded-lg hover:brightness-95 transition-colors" aria-label="${product.itemName} ã®è©³ç´°ã‚’è¡¨ç¤º">
                            è©³ç´°ã‚’è¦‹ã‚‹
                        </button>
                        <div class="flex gap-2 mt-3 items-center">
                            <label class="inline-flex items-center gap-2 text-sm border rounded-lg px-3 py-2" style="min-height:44px;">
                                <input type="checkbox" class="compare-checkbox" data-id="${product.itemName}" aria-label="${product.itemName} ã‚’æ¯”è¼ƒã«è¿½åŠ ">
                                æ¯”è¼ƒ
                            </label>
                            <button class="btn border rounded-lg px-3 py-2 text-sm share-btn" style="min-width:44px;min-height:44px;" data-rank="${product.rank}" data-name="${product.itemName}" aria-label="${product.itemName} ã‚’å…±æœ‰">å…±æœ‰</button>
                            ${detailLinkHtml}
                            <a href="${product.affiliateUrl}" target="_blank" rel="sponsored nofollow noopener noreferrer" class="block w-full text-center btn-cta font-bold py-3 px-4 rounded-lg hover:opacity-95 hover:brightness-110 transition" aria-label="æ¥½å¤©ã§ä¾¡æ ¼ã¨åœ¨åº«ã‚’ç¢ºèª">
                                æ¥½å¤©ã§ä¾¡æ ¼ãƒ»åœ¨åº«ã‚’ç¢ºèª
                            </a>
                            <span class="text-[11px] text-muted self-center">PRï½œåºƒå‘Š</span>
                        </div>
                    </div>
                </div>
            `;
        }

        let productsChart = null;
        let currentData = [];

        function computeScores(list) {
            const values = {
                price: list.map(metrics.price.getter),
                rating: list.map(metrics.rating.getter),
                reviews: list.map(metrics.reviews.getter),
            };
            const minmax = (arr) => ({ min: Math.min(...arr), max: Math.max(...arr) });
            const mm = { price: minmax(values.price), rating: minmax(values.rating), reviews: minmax(values.reviews) };
            const norm = (v, {min, max}, better) => {
                if (max === min) return 0.5; // åŒä¸€å€¤
                const t = (v - min) / (max - min);
                return better === 'higher' ? t : 1 - t;
            };
            return list.map(p => {
                const sPrice = norm(p.itemPrice, mm.price, 'lower');
                const sRating = norm(p.reviewAverage, mm.rating, 'higher');
                const sReviews = norm(p.reviewCount, mm.reviews, 'higher');
                const score = sPrice * state.weights.price + sRating * state.weights.rating + sReviews * state.weights.reviews;
                return { ...p, score: Number(score.toFixed(4)) };
            });
        }

        function filterData() {
            const q = state.query.trim().toLowerCase();
            const tokens = q ? q.split(/\s+/).filter(Boolean) : [];
            const favoritesFilter = state.onlyFavorites ? favorites : null;
            const pmin = Math.min(state.priceMin, state.priceMax);
            const pmax = Math.max(state.priceMin, state.priceMax);
            let list = augmented.filter(p => {
                const hay = `${p.itemName} ${p.catchcopy} ${p.description}`.toLowerCase();
                const textOk = tokens.length === 0 || tokens.every(t => hay.includes(t));
                return (
                    p.itemPrice >= pmin && p.itemPrice <= pmax &&
                    p.reviewAverage >= state.ratingMin &&
                    p.reviewCount >= state.reviewMin &&
                    textOk &&
                    (!favoritesFilter || favoritesFilter.has(productId(p))) &&
                    (state.selectedTags.size === 0 || p.tags.some(t => state.selectedTags.has(t)))
                );
            });
            list = computeScores(list);
            return list;
        }

        function displayResults(sortKey) {
            state.sortKey = sortKey;
            resultsContainer.innerHTML = '';
            
            let list = filterData();
            if(sortKey === 'price') list.sort((a,b) => a.itemPrice - b.itemPrice);
            else if (sortKey === 'review') list.sort((a,b) => b.reviewAverage - a.reviewAverage);
            else if (sortKey === 'rank') list.sort((a,b) => a.rank - b.rank);
            else if (sortKey === 'score') list.sort((a,b) => b.score - a.score);

            // ç”»é¢æŒ¿å…¥ï¼ˆãƒ©ãƒ³ã‚¯ã¯è¡¨ç¤ºç”¨é€£ç•ªï¼‰
            if (list.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="bg-white rounded-2xl card-shadow p-6 md:p-8 text-center">
                        <p class="font-semibold mb-2">è©²å½“ã™ã‚‹å•†å“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
                        <p class="text-sm text-muted mb-4">æ¡ä»¶ãŒå³ã—ã™ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ¡ä»¶ã‚’ã‚†ã‚‹ã‚ã‚‹ã‹ãƒªã‚»ãƒƒãƒˆã—ã¦ãã ã•ã„ã€‚</p>
                        <div class="flex justify-center gap-2">
                            <button id="btn-clear-filters" class="btn border rounded-lg px-4 py-2">æ¡ä»¶ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
                        </div>
                    </div>
                `;
            } else {
                list.forEach((product, index) => {
                    const temp = { ...product, rank: index + 1 };
                    resultsContainer.insertAdjacentHTML('beforeend', createCard(temp));
                });
            }

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            setTimeout(() => {
                list.forEach((_, index) => {
                    const card = document.getElementById(`card-${index + 1}`);
                    if(card) card.classList.remove('opacity-0', 'translate-y-4');
                });
            }, 10);

            // ãƒœã‚¿ãƒ³çŠ¶æ…‹
            for (const key in sortButtons) {
                if(key === sortKey) { sortButtons[key].classList.remove('bg-accent'); sortButtons[key].classList.add('bg-primary', 'ring-2', 'ring-offset-2'); sortButtons[key].setAttribute('aria-selected','true'); }
                else { sortButtons[key].classList.remove('bg-primary', 'ring-2', 'ring-offset-2'); sortButtons[key].classList.add('bg-accent'); sortButtons[key].setAttribute('aria-selected','false'); }
            }

            // ãŠã™ã™ã‚é †ãƒœã‚¿ãƒ³
            if (sortKey === 'score') btnSortScore.classList.add('ring-2', 'ring-offset-2'); else btnSortScore.classList.remove('ring-2', 'ring-offset-2');

            // å…±æœ‰/ãŠæ°—ã«å…¥ã‚Š/æ¯”è¼ƒ ã‚¤ãƒ™ãƒ³ãƒˆ
            document.querySelectorAll('.favorite-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.dataset.id;
                    if (favorites.has(id)) favorites.delete(id); else favorites.add(id);
                    setFavorites(favorites);
                    btn.textContent = favorites.has(id) ? 'â˜…' : 'â˜†';
                    if (state.onlyFavorites) displayResults(state.sortKey);
                });
            });
            document.querySelectorAll('.compare-checkbox').forEach(chk => {
                const id = chk.dataset.id;
                chk.checked = compareSet.has(id);
                chk.addEventListener('change', () => {
                    if (chk.checked) {
                        if (compareSet.size >= 3) { chk.checked = false; return; }
                        compareSet.add(id);
                } else {
                        compareSet.delete(id);
                    }
                    updateCompareBar();
                });
            });
            document.querySelectorAll('.share-btn').forEach(btn => {
                btn.addEventListener('click', async () => {
                    const rank = btn.dataset.rank;
                    const name = btn.dataset.name;
                    const url = `${location.origin}${location.pathname}#card-${rank}`;
                    try {
                        if (navigator.share) await navigator.share({ title: name, url });
                        else { await navigator.clipboard.writeText(url); btn.textContent = 'ã‚³ãƒ”ãƒ¼æ¸ˆã¿'; setTimeout(()=>btn.textContent='å…±æœ‰',1500); }
                    } catch {}
                });
            });

            currentData = list;
            refreshChart(list);
            resultSummary.textContent = `${list.length} ä»¶è¡¨ç¤ºä¸­`;
            setState({ ...state, selectedTags: Array.from(state.selectedTags) });
            // ç©ºè¡¨ç¤ºæ™‚ã®ãƒªã‚»ãƒƒãƒˆãƒãƒ³ãƒ‰ãƒ©
            const clearBtn = document.getElementById('btn-clear-filters');
            if (clearBtn) clearBtn.addEventListener('click', () => btnReset.click());
        }

        function updateCompareBar() {
            compareCount.textContent = compareSet.size;
            btnCompare.disabled = compareSet.size < 2;
            compareBar.classList.toggle('hidden', compareSet.size === 0);
        }

        function openCompareModal() {
            const ids = Array.from(compareSet);
            const items = augmented.filter(p => ids.includes(productId(p)));
            const best = {
                price: Math.min(...items.map(p => p.itemPrice)),
                rating: Math.max(...items.map(p => p.reviewAverage)),
                reviews: Math.max(...items.map(p => p.reviewCount)),
            };
            const html = `
                <div class="mb-4 p-4 bg-blue-50 rounded-lg text-sm text-blue-800">
                    <p class="font-bold mb-2">ğŸ“Š æ¯”è¼ƒåŸºæº–ã«ã¤ã„ã¦</p>
                    <p>ã“ã®æ¯”è¼ƒè¡¨ã§ã¯ã€<strong>é»„è‰²ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ</strong>ãŒå„é …ç›®ã®æœ€è‰¯å€¤ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ä¾¡æ ¼ï¼ˆæœ€å®‰å€¤ï¼‰ã€è©•ä¾¡ï¼ˆæœ€é«˜å€¤ï¼‰ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ä»¶æ•°ï¼ˆæœ€å¤šï¼‰ã‚’åŸºæº–ã¨ã—ã¦å®¢è¦³çš„ã«æ¯”è¼ƒã—ã¦ã„ã¾ã™ã€‚</p>
                    <p class="mt-1">é¸å®šç†ç”±ï¼šæ¥½å¤©å¸‚å ´ã®å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãã€ã‚³ã‚¹ãƒ‘(34%)ãƒ»å“è³ª(33%)ãƒ»äººæ°—(33%)ã®ãƒãƒ©ãƒ³ã‚¹ã§è©•ä¾¡ã—ã¦ã„ã¾ã™ã€‚</p>
                </div>
                <table class="w-full text-sm table-striped">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="text-left p-3 font-bold">æ¯”è¼ƒé …ç›®</th>
                            ${items.map(p => `<th class="text-left p-3 font-bold">${p.itemName.length > 20 ? p.itemName.substring(0, 20) + '...' : p.itemName}</th>`).join('')}
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-t">
                            <td class="p-3 font-semibold bg-gray-50">ä¾¡æ ¼ï¼ˆç¨è¾¼ï¼‰</td>
                            ${items.map(p => `<td class="p-3 ${p.itemPrice===best.price?'bg-yellow-50 ring-2 ring-yellow-200 font-bold':''}">Â¥${p.itemPrice.toLocaleString()}</td>`).join('')}
                        </tr>
                        <tr class="border-t">
                            <td class="p-3 font-semibold bg-gray-50">è©•ä¾¡</td>
                            ${items.map(p => `<td class="p-3 ${p.reviewAverage===best.rating?'bg-yellow-50 ring-2 ring-yellow-200 font-bold':''}">â­ ${p.reviewAverage} / 5.0</td>`).join('')}
                        </tr>
                        <tr class="border-t">
                            <td class="p-3 font-semibold bg-gray-50">ãƒ¬ãƒ“ãƒ¥ãƒ¼ä»¶æ•°</td>
                            ${items.map(p => `<td class="p-3 ${p.reviewCount===best.reviews?'bg-yellow-50 ring-2 ring-yellow-200 font-bold':''}">${p.reviewCount.toLocaleString()}ä»¶</td>`).join('')}
                        </tr>
                        <tr class="border-t">
                            <td class="p-3 font-semibold bg-gray-50">æ©Ÿèƒ½ãƒ»ç‰¹å¾´</td>
                            ${items.map(p => `<td class="p-3">${p.tags.map(t=>`<span class='chip'>${t}</span>`).join(' ')}</td>`).join('')}
                        </tr>
                        <tr class="border-t">
                            <td class="p-3 font-semibold bg-gray-50">ç·åˆè©•ä¾¡</td>
                            ${items.map(p => {
                                const score = computeScores([p])[0].score;
                                const stars = 'â˜…'.repeat(Math.round(score * 5)) + 'â˜†'.repeat(5 - Math.round(score * 5));
                                return `<td class="p-3">${stars}<br><small>(${(score * 100).toFixed(1)}ç‚¹)</small></td>`;
                            }).join('')}
                        </tr>
                    </tbody>
                </table>
                <div class="mt-4 text-xs text-gray-600">
                    <p>â€» ä¾¡æ ¼ãƒ»åœ¨åº«ã¯å¤‰å‹•ã—ã¾ã™ã€‚æœ€æ–°æƒ…å ±ã¯å„å•†å“ã®ãƒªãƒ³ã‚¯å…ˆã§ã”ç¢ºèªãã ã•ã„ã€‚</p>
                    <p>â€» ç·åˆè©•ä¾¡ã¯å½“ã‚µã‚¤ãƒˆç‹¬è‡ªã®ã‚¹ã‚³ã‚¢ï¼ˆä¾¡æ ¼ãƒ»è©•ä¾¡ãƒ»äººæ°—ã®ç·åˆå€¤ï¼‰ã§ã™ã€‚</p>
                </div>
            `;
            document.getElementById('compare-body').innerHTML = html;
            modalBackdrop.style.display = 'flex';
        }

        function refreshChart(list) {
            const ctx = document.getElementById('productsChart').getContext('2d');
            const dataPoints = list.map((p, i) => ({
                x: p.itemPrice,
                y: p.reviewAverage,
                r: Math.max(5, Math.sqrt(p.reviewCount) / 10),
                label: `[${i+1}ä½] ${p.itemName}`,
                id: productId(p)
            }));
            if (!productsChart) {
                productsChart = new Chart(ctx, {
                    type: 'bubble',
                    data: { datasets: [{ label: 'å•†å“', data: dataPoints, backgroundColor: 'rgba(37, 99, 235, 0.6)', borderColor: 'rgba(37, 99, 235, 1)', borderWidth: 1 }] },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: { label: (ctx) => [ `${ctx.raw.label}`, `ä¾¡æ ¼: ${ctx.raw.x.toLocaleString()}å††`, `è©•ä¾¡: ${ctx.raw.y}` ] }
                            }
                        },
                        onClick: (_, elements) => {
                            if (elements.length) {
                                const idx = elements[0].index;
                                const el = document.getElementById(`card-${idx+1}`);
                                if (el) {
                                    el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                                    el.classList.add('highlight-ring');
                                    setTimeout(()=>el.classList.remove('highlight-ring'), 1800);
                                }
                            }
                        },
                        scales: {
                            x: { title: { display: true, text: 'ä¾¡æ ¼ï¼ˆå††ï¼‰', font: { size: 16 } }, ticks: { callback: (v) => v.toLocaleString(), font: { size: 14 } } },
                            y: { title: { display: true, text: 'ãƒ¬ãƒ“ãƒ¥ãƒ¼è©•ä¾¡', font: { size: 16 } }, min: 4.0, max: 4.6, ticks: { font: { size: 14 } } },
                        }
                    }
                });
            } else {
                productsChart.data.datasets[0].data = dataPoints;
                productsChart.update();
            }
        }

        function toggleDetails(rank) {
            const details = document.getElementById(`details-${rank}`);
            const button = details.nextElementSibling;
            details.classList.toggle('hidden');
             if (details.classList.contains('hidden')) {
                button.textContent = 'è©³ç´°ã‚’è¦‹ã‚‹';
            } else {
                button.textContent = 'é–‰ã˜ã‚‹';
            }
        }

        sortButtons.rank.addEventListener('click', () => displayResults('rank'));
        sortButtons.price.addEventListener('click', () => displayResults('price'));
        sortButtons.review.addEventListener('click', () => displayResults('review'));
        btnSortScore.addEventListener('click', () => displayResults('score'));
        btnReset.addEventListener('click', () => {
            state.query = '';
            state.priceMin = priceBounds.min; state.priceMax = priceBounds.max;
            state.ratingMin = 0; state.reviewMin = 0; state.onlyFavorites = false; state.selectedTags.clear();
            searchBox.value = ''; priceMinInput.value = state.priceMin; priceMaxInput.value = state.priceMax;
            filterRating.value = 0; labelRating.textContent = '0.0';
            filterReview.value = 0; labelReview.textContent = '0';
            Array.from(tagsContainer.children).forEach(el=>el.classList.remove('chip-selected'));
            favOnlyCheckbox.checked = false;
            displayResults('rank');
        });

        // é¸ã³æ–¹ã‚¬ã‚¤ãƒ‰: ã‚¯ãƒªãƒƒã‚¯ã§ä¸¦ã³æ›¿ãˆãƒ»ãƒ•ã‚£ãƒ«ã‚¿ã‚’é©ç”¨
        const guidePopular = document.getElementById('guide-popular');
        const guideCost = document.getElementById('guide-cost');
        const guideQuality = document.getElementById('guide-quality');
        if (guidePopular) {
            const applyPopular = () => { state.reviewMin = 1000; labelReview.textContent = state.reviewMin.toLocaleString(); filterReview.value = state.reviewMin; displayResults('review'); };
            guidePopular.addEventListener('click', applyPopular);
            guidePopular.addEventListener('keypress', (e)=>{ if(e.key==='Enter'||e.key===' ') applyPopular(); });
        }
        if (guideCost) {
            const applyCost = () => { state.priceMax = Math.round(priceBounds.min + (priceBounds.max - priceBounds.min) * 0.4); priceMaxInput.value = state.priceMax; displayResults('price'); };
            guideCost.addEventListener('click', applyCost);
            guideCost.addEventListener('keypress', (e)=>{ if(e.key==='Enter'||e.key===' ') applyCost(); });
        }
        if (guideQuality) {
            const applyQuality = () => { state.ratingMin = 4.4; labelRating.textContent = state.ratingMin.toFixed(1); filterRating.value = state.ratingMin; displayResults('review'); };
            guideQuality.addEventListener('click', applyQuality);
            guideQuality.addEventListener('keypress', (e)=>{ if(e.key==='Enter'||e.key===' ') applyQuality(); });
        }

        // ãƒ†ã‚¹ãƒ†ã‚£ãƒ¢ãƒ‹ã‚¢ãƒ«: ã‚¯ãƒªãƒƒã‚¯ã§æ¤œç´¢ã«åæ˜ 
        document.querySelectorAll('.testimonial').forEach(el => {
            const q = el.getAttribute('data-query');
            el.addEventListener('click', ()=>{ if(!q) return; state.query = q; searchBox.value = q; displayResults(state.sortKey); document.getElementById('interactive-selection')?.scrollIntoView({behavior:'smooth'}); });
            el.addEventListener('keypress', (e)=>{ if((e.key==='Enter'||e.key===' ') && q){ state.query = q; searchBox.value = q; displayResults(state.sortKey); document.getElementById('interactive-selection')?.scrollIntoView({behavior:'smooth'}); }});
        });

        const syncPriceQuick = () => {
            // ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼: å³ã»ã©å®‰ä¾¡å¯„ã‚Šï¼ˆä¸‹ä½x%ã®ä¾¡æ ¼å¸¯ã¸Maxã‚’åˆã‚ã›ã‚‹ï¼‰
            const t = Number(priceRangeQuick.value) / 100; // 0..1
            const span = priceBounds.max - priceBounds.min;
            state.priceMin = priceBounds.min;
            state.priceMax = Math.round(priceBounds.max - span * t);
            priceMinInput.value = state.priceMin; priceMaxInput.value = state.priceMax;
        };

        searchBox.addEventListener('input', debounce((e) => { state.query = e.target.value; displayResults(state.sortKey); }));
        priceMinInput.addEventListener('change', (e) => { state.priceMin = Number(e.target.value); displayResults(state.sortKey); });
        priceMaxInput.addEventListener('change', (e) => { state.priceMax = Number(e.target.value); displayResults(state.sortKey); });
        priceRangeQuick.addEventListener('input', () => { syncPriceQuick(); displayResults(state.sortKey); });
        filterRating.addEventListener('input', (e) => { state.ratingMin = Number(e.target.value); labelRating.textContent = state.ratingMin.toFixed(1); displayResults(state.sortKey); });
        filterReview.addEventListener('input', (e) => { state.reviewMin = Number(e.target.value); labelReview.textContent = state.reviewMin.toLocaleString(); displayResults(state.sortKey); });
        favOnlyCheckbox.addEventListener('change', (e) => { state.onlyFavorites = e.target.checked; displayResults(state.sortKey); });
        btnCompare.addEventListener('click', openCompareModal);
        btnCompareClear.addEventListener('click', () => { compareSet.clear(); updateCompareBar(); document.querySelectorAll('.compare-checkbox').forEach(x=>x.checked=false); });
        modalBackdrop.addEventListener('click', (e) => { if (e.target === modalBackdrop) modalBackdrop.style.display = 'none'; });
        modalBackdrop.querySelector('#modal-close').addEventListener('click', () => modalBackdrop.style.display = 'none');
        
        // FAQ å…¨é–‹/å…¨é–‰
        const btnFaqOpenAll = document.getElementById('btn-faq-open-all');
        const btnFaqCloseAll = document.getElementById('btn-faq-close-all');
        if (btnFaqOpenAll && btnFaqCloseAll) {
            btnFaqOpenAll.addEventListener('click', () => { document.querySelectorAll('#faq details').forEach(d => d.open = true); });
            btnFaqCloseAll.addEventListener('click', () => { document.querySelectorAll('#faq details').forEach(d => d.open = false); });
        }

        // ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
        const applyTheme = (t) => {
            if (t === 'dark') document.documentElement.classList.add('dark');
            else document.documentElement.classList.remove('dark');
            btnDarkToggle.textContent = document.documentElement.classList.contains('dark') ? 'â˜€ï¸ ãƒ©ã‚¤ãƒˆ' : 'ğŸŒ™ ãƒ€ãƒ¼ã‚¯';
            btnDarkToggle.setAttribute('aria-pressed', document.documentElement.classList.contains('dark'));
        };
        const preferred = getTheme() || 'light';
        applyTheme(preferred);
        btnDarkToggle.addEventListener('click', () => {
            const isDark = document.documentElement.classList.toggle('dark');
            setTheme(isDark ? 'dark' : 'light');
            btnDarkToggle.textContent = isDark ? 'â˜€ï¸ ãƒ©ã‚¤ãƒˆ' : 'ğŸŒ™ ãƒ€ãƒ¼ã‚¯';
            displayResults(state.sortKey);
        });

        // PWA install
        let deferredPrompt = null;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault(); deferredPrompt = e; btnInstall.classList.remove('hidden');
        });
        btnInstall.addEventListener('click', async () => { if (!deferredPrompt) return; deferredPrompt.prompt(); await deferredPrompt.userChoice; deferredPrompt = null; btnInstall.classList.add('hidden'); });

        // SW ç™»éŒ²
        if ('serviceWorker' in navigator) { navigator.serviceWorker.register('../../sw.js').catch(()=>{}); }


        // åˆæœŸãƒãƒ£ãƒ¼ãƒˆã¯ displayResults å†…ã§ç”Ÿæˆ

        // åˆæœŸè¡¨ç¤º
        (function initFromState(){
            const saved = getState();
            if (saved) {
                state.sortKey = saved.sortKey || 'rank';
                state.query = saved.query || '';
                state.priceMin = saved.priceMin ?? priceBounds.min;
                state.priceMax = saved.priceMax ?? priceBounds.max;
                state.ratingMin = saved.ratingMin || 0;
                state.reviewMin = saved.reviewMin || 0;
                state.onlyFavorites = saved.onlyFavorites || false;
                state.selectedTags = new Set(saved.selectedTags || []);
                // åæ˜ 
                searchBox.value = state.query;
                priceMinInput.value = state.priceMin; priceMaxInput.value = state.priceMax;
                filterRating.value = state.ratingMin; labelRating.textContent = state.ratingMin.toFixed(1);
                filterReview.value = state.reviewMin; labelReview.textContent = state.reviewMin.toLocaleString();
                Array.from(tagsContainer.children).forEach(el => { if (state.selectedTags.has(el.textContent)) el.classList.add('chip-selected'); });
                favOnlyCheckbox.checked = state.onlyFavorites;
            }
            displayResults(state.sortKey);
            // ãƒãƒƒã‚·ãƒ¥ãƒªãƒ³ã‚¯å¯¾å¿œ
            if (location.hash.startsWith('#card-')) { const el = document.querySelector(location.hash); if (el) setTimeout(()=>el.scrollIntoView({behavior:'smooth'}), 300); }
        })();

        // ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ—¥è¡¨ç¤º
        document.getElementById('data-updated').textContent = new Date().toISOString().slice(0,10);

        // ç·åˆãƒˆãƒƒãƒ—3ï¼ˆscoreãƒ™ãƒ¼ã‚¹ï¼‰
        (function renderTop3(){
            const list = computeScores([...augmented]).sort((a,b)=> b.score - a.score).slice(0,3);
            const el = document.getElementById('top3-container');
            el.innerHTML = list.map((p, i) => `
                <div class="bg-white rounded-2xl card-shadow card-shadow-hover transition-all transform-gpu">
                    <img src="${imgUrlWithSize(p.imageUrl, 640)}" srcset="${buildSrcset(p.imageUrl)}" sizes="(min-width:1024px) 320px, (min-width:768px) 30vw, 90vw" alt="${p.itemName}" width="640" height="640" loading="${i === 0 ? 'eager' : 'lazy'}" decoding="async" class="rounded-t-2xl w-full object-contain bg-white" style="aspect-ratio: 1 / 1;">
                    <div class="p-5">
                        <p class="text-xs text-gray-500">ãŠã™ã™ã‚</p>
                        <h3 class="font-bold text-primary leading-tight mb-1">${p.itemName}</h3>
                        <div class="flex items-center justify-between mb-3">
                            <span class="text-lg font-bold text-accent">Â¥${p.itemPrice.toLocaleString()}</span>
                            <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">â­ ${p.reviewAverage}</span>
                        </div>
                        <a href="${p.affiliateUrl}" target="_blank" rel="sponsored nofollow noopener noreferrer" class="block w-full text-center btn-cta font-bold py-3 px-4 rounded-lg hover:opacity-95 hover:brightness-110 transition">æ¥½å¤©ã§ä¾¡æ ¼ãƒ»åœ¨åº«ã‚’ç¢ºèª</a>
                        <span class="block text-center text-[11px] text-muted mt-1">PRï½œåºƒå‘Š</span>
                    </div>
                </div>
            `).join('');
        })();

        // JSON-LDï¼ˆItemList + BreadcrumbListï¼‰
        (function injectJsonLd(){
            try {
                // ItemListæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
                const itemList = {
                    '@context': 'https://schema.org',
                    '@type': 'ItemList',
                    'name': 'ãƒãƒå‘ã‘æ¥½å¤©ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ãƒ»é«˜æ©Ÿèƒ½Ã—ä½“å‹ã‚«ãƒãƒ¼ã®æ¨ã—10é¸',
                    'description': 'å­è‚²ã¦ä¸–ä»£ã®ãƒãƒå‘ã‘ï¼æ¥½å¤©ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã§å®Ÿéš›ã«å£²ã‚Œã¦ã„ã‚‹æ©Ÿèƒ½æ€§ï¼‹ä½“å‹ã‚«ãƒãƒ¼åŠ›æŠœç¾¤ã®ã‚¢ã‚¤ãƒ†ãƒ TOP10',
                    'numberOfItems': productsData.length,
                    'itemListOrder': 'https://schema.org/ItemListOrderAscending',
                    'itemListElement': productsData.map((p, idx)=>({
                        '@type': 'ListItem',
                        'position': idx + 1,
                        'url': p.affiliateUrl,
                        'item': {
                            '@type': 'Product',
                            'name': p.itemName,
                            'image': [p.imageUrl, imgUrlWithSize(p.imageUrl, 1200)],
                            'description': p.description || p.catchcopy,
                            'brand': {
                                '@type': 'Brand',
                                'name': 'æ¥½å¤©å¸‚å ´'
                            },
                            'category': 'ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³',
                            'aggregateRating': {
                                '@type': 'AggregateRating',
                                'ratingValue': p.reviewAverage,
                                'reviewCount': p.reviewCount,
                                'bestRating': 5,
                                'worstRating': 1
                            },
                            'offers': {
                                '@type': 'Offer',
                                'priceCurrency': 'JPY',
                                'price': p.itemPrice,
                                'lowPrice': p.itemPrice,
                                'highPrice': p.itemPrice,
                                'url': p.affiliateUrl,
                                'availability': 'https://schema.org/InStock',
                                'seller': {
                                    '@type': 'Organization',
                                    'name': 'æ¥½å¤©å¸‚å ´'
                                }
                            },
                            'review': {
                                '@type': 'Review',
                                'reviewBody': p.description,
                                'reviewRating': {
                                    '@type': 'Rating',
                                    'ratingValue': p.reviewAverage,
                                    'bestRating': 5
                                },
                                'author': {
                                    '@type': 'Organization',
                                    'name': 'kurashi-selectç·¨é›†éƒ¨'
                                }
                            }
                        }
                    }))
                };
                
                // BreadcrumbListæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
                const breadcrumb = {
                    '@context': 'https://schema.org',
                    '@type': 'BreadcrumbList',
                    'itemListElement': [
                        {
                            '@type': 'ListItem',
                            'position': 1,
                            'name': 'ãƒ›ãƒ¼ãƒ ',
                            'item': location.origin
                        },
                        {
                            '@type': 'ListItem',
                            'position': 2,
                            'name': 'ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³',
                            'item': location.origin + '/article/'
                        },
                        {
                            '@type': 'ListItem',
                            'position': 3,
                            'name': 'ãƒãƒå‘ã‘æ¥½å¤©ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ãƒ»é«˜æ©Ÿèƒ½Ã—ä½“å‹ã‚«ãƒãƒ¼ã®æ¨ã—10é¸'
                        }
                    ]
                };
                
                // FAQæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
                const faq = {
                    '@context': 'https://schema.org',
                    '@type': 'FAQPage',
                    'mainEntity': [
                        {
                            '@type': 'Question',
                            'name': 'å­è‚²ã¦ä¸­ã§ã‚‚ä½¿ã„ã‚„ã™ã„ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã®ç‰¹å¾´ã¯ï¼Ÿ',
                            'acceptedAnswer': {
                                '@type': 'Answer',
                                'text': 'UVã‚«ãƒƒãƒˆæ©Ÿèƒ½ãƒ»æ¥è§¦å†·æ„Ÿãƒ»ä½“å‹ã‚«ãƒãƒ¼ãƒ»ã‚¹ãƒˆãƒ¬ãƒƒãƒæ€§ãƒ»æ´—æ¿¯ã—ã‚„ã™ã•ãªã©ã®æ©Ÿèƒ½æ€§ã¨ã€æˆä¹³ã—ã‚„ã™ã„ãƒ‡ã‚¶ã‚¤ãƒ³ã‚„å‹•ãã‚„ã™ã•ã‚’å…¼ã­å‚™ãˆãŸã‚¢ã‚¤ãƒ†ãƒ ãŒäººæ°—ã§ã™ã€‚ç‰¹ã«1,000å††ï½2,000å††å°ã®é«˜ã‚³ã‚¹ãƒ‘å•†å“ãŒå¤šãé¸ã°ã‚Œã¦ã„ã¾ã™ã€‚'
                            }
                        },
                        {
                            '@type': 'Question',
                            'name': 'ã“ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®é¸å®šåŸºæº–ã¯ï¼Ÿ',
                            'acceptedAnswer': {
                                '@type': 'Answer',
                                'text': 'æ¥½å¤©å¸‚å ´ã®å®Ÿéš›ã®è²©å£²ãƒ‡ãƒ¼ã‚¿ã€1ä¸‡ä»¶ã‚’è¶…ãˆã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼åˆ†æã€ä¾¡æ ¼ãƒ»è©•ä¾¡ãƒ»äººæ°—åº¦ã‚’ç·åˆã—ãŸç‹¬è‡ªã‚¹ã‚³ã‚¢ã§é¸å®šã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«æ©Ÿèƒ½æ€§ãƒ»ä½“å‹ã‚«ãƒãƒ¼åŠ›ãƒ»ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’é‡è¦–ã—ã€å­è‚²ã¦ä¸–ä»£ã«æœ¬å½“ã«é¸ã°ã‚Œã¦ã„ã‚‹å•†å“ã®ã¿ã‚’å³é¸ã—ã¾ã—ãŸã€‚'
                            }
                        },
                        {
                            '@type': 'Question',
                            'name': 'å•†å“ã®ä¾¡æ ¼ã‚„åœ¨åº«ã¯æœ€æ–°ã§ã™ã‹ï¼Ÿ',
                            'acceptedAnswer': {
                                '@type': 'Answer',
                                'text': 'ä¾¡æ ¼ãƒ»åœ¨åº«ã¯å¤‰å‹•ã—ã¾ã™ã€‚æœ€æ–°ã®ä¾¡æ ¼ãƒ»åœ¨åº«çŠ¶æ³ã¯å„å•†å“ã®ãƒªãƒ³ã‚¯å…ˆï¼ˆæ¥½å¤©å¸‚å ´ï¼‰ã§ã”ç¢ºèªãã ã•ã„ã€‚å½“ã‚µã‚¤ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã¯å®šæœŸçš„ã«æ›´æ–°ã—ã¦ã„ã¾ã™ãŒã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚'
                            }
                        }
                    ]
                };
                
                [itemList, breadcrumb, faq].forEach(data => {
                    const s = document.createElement('script');
                    s.type = 'application/ld+json';
                    s.text = JSON.stringify(data);
                    document.head.appendChild(s);
                });
            } catch {}
        })();

        // detailsã‚’é–‹ã„ãŸã¨ãã«ã‚°ãƒ©ãƒ•ã‚’åˆæœŸåŒ–/å†æç”»
        (function bindDetailsChart(){
            const detailsEl = document.querySelector('#chart-analysis details');
            if (!detailsEl) return;
            detailsEl.addEventListener('toggle', () => {
                if (detailsEl.open) {
                    // çŸ­ã„é…å»¶ã§Chart.jsãŒå®Œå…¨ã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã®ã‚’å¾…ã¤
                    setTimeout(() => {
                        if (!productsChart) {
                            const list = currentData && currentData.length ? currentData : filterData();
                            // åˆå›ã¯ã“ã“ã§åˆæœŸåŒ–ï¼ˆclosedçŠ¶æ…‹ã§ç”Ÿæˆã—ãªã„ï¼‰
                            refreshChart(list);
                        } else {
                            // ã‚µã‚¤ã‚ºå†è¨ˆç®—ã®ã¿ã§OK
                            setTimeout(() => { try { productsChart.resize(); } catch {} }, 50);
                        }
                    }, 100);
                }
            });
            // ã‚‚ã—åˆæœŸçŠ¶æ…‹ã§é–‹ã„ã¦ã„ã‚Œã°å³ç”Ÿæˆ
            if (detailsEl.open) {
                setTimeout(() => {
                    const list = currentData && currentData.length ? currentData : filterData();
                    refreshChart(list);
                }, 200);
            }
        })();

        // ------- ã‚·ã‚§ã‚¢ãƒãƒ¼ï¼ˆX/LINE/ã‚³ãƒ”ãƒ¼/OSå…±æœ‰ï¼‰
        function getPageShareData() {
            const pageTitle = (document.title || '').trim();
            const heading = (document.querySelector('h1')?.textContent || '').trim();
            const text = heading && heading !== pageTitle ? heading : pageTitle;
            const url = `${location.origin}${location.pathname}${location.search}`; // ãƒãƒƒã‚·ãƒ¥é™¤å¤–
            return { title: pageTitle || 'ãŠã™ã™ã‚ã¾ã¨ã‚', text: text || pageTitle, url };
        }
        function openCenteredPopup(url) {
            try {
                const width = 600, height = 680;
                const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;
                const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;
                const screenWidth = window.innerWidth || document.documentElement.clientWidth || screen.width;
                const screenHeight = window.innerHeight || document.documentElement.clientHeight || screen.height;
                const left = dualScreenLeft + (screenWidth - width) / 2;
                const top = dualScreenTop + (screenHeight - height) / 2;
                window.open(url, '_blank', `noopener,noreferrer,width=${width},height=${height},top=${top},left=${left}`);
            } catch { window.open(url, '_blank'); }
        }
        async function handleShareAction(action, btn) {
            const { title, text, url } = getPageShareData();
            if (action === 'native') {
                try { if (navigator.share) { await navigator.share({ title, text, url }); return; } } catch {}
                return handleShareAction('copy', btn);
            }
            if (action === 'x') {
                const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
                openCenteredPopup(shareUrl);
                return;
            }
            if (action === 'line') {
                const shareUrl = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(url)}`;
                openCenteredPopup(shareUrl);
                return;
            }
            if (action === 'copy') {
                try {
                    await navigator.clipboard.writeText(url);
                    const original = btn.textContent;
                    btn.textContent = 'ã‚³ãƒ”ãƒ¼æ¸ˆã¿';
                    setTimeout(() => { btn.textContent = original; }, 1500);
                } catch {}
                return;
            }
        }
        (function initShareBars(){
            const buttons = document.querySelectorAll('[data-share-action]');
            buttons.forEach(b => {
                b.addEventListener('click', () => handleShareAction(b.dataset.shareAction, b));
            });
            if (!navigator.share) {
                document.querySelectorAll('[data-share-action="native"]').forEach(el => el.classList.add('hidden'));
            }
            // FABï¼ˆã‚¹ãƒãƒ›ã®ã¿è¡¨ç¤ºï¼‰
            const fabWrap = document.getElementById('share-fab-wrap');
            const fabBtn = document.getElementById('btn-share-fab');
            const fabMenu = document.getElementById('share-fab-menu');
            const mq = window.matchMedia('(max-width: 767px)');
            const updateFabVisibility = () => { fabWrap.style.display = mq.matches ? 'block' : 'none'; };
            updateFabVisibility();
            mq.addEventListener?.('change', updateFabVisibility);
            let menuOpen = false;
            if (fabBtn) {
                fabBtn.addEventListener('click', () => {
                    menuOpen = !menuOpen;
                    fabMenu.classList.toggle('hidden', !menuOpen);
                });
            }
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã«ä¸Šéƒ¨ã§éè¡¨ç¤ºã€ä¸‹éƒ¨ã§è¡¨ç¤º
            let lastY = 0;
            window.addEventListener('scroll', () => {
                const y = window.scrollY || 0;
                if (y < 200) { fabWrap.style.opacity = '0'; fabWrap.style.pointerEvents = 'none'; }
                else { fabWrap.style.opacity = '1'; fabWrap.style.pointerEvents = 'auto'; }
                lastY = y;
            }, { passive: true });
            // ã‚¯ãƒªãƒƒã‚¯å¤–ã—ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹
            document.addEventListener('click', (e) => {
                if (!fabWrap.contains(e.target) && menuOpen) { menuOpen = false; fabMenu.classList.add('hidden'); }
            });
        })();
    </script>
    
    <!-- èª­ã¿è¾¼ã¿å®Œäº†å¾Œã«bodyã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script>
        window.onload = function() {
            document.body.style.display = "block";
            // ãƒ˜ãƒƒãƒ€ãƒ¼æœ‰åŠ¹åŒ–
            document.body.classList.add('has-header');
            (function headerAutoHide(){
                const header = document.getElementById('site-header');
                if (!header) return;
                let lastY = window.scrollY || 0;
                let ticking = false;
                window.addEventListener('scroll', () => {
                    const y = window.scrollY || 0;
                    if (!ticking) {
                        window.requestAnimationFrame(() => {
                            if (y > lastY && y > 80) header.classList.add('hide');
                            else header.classList.remove('hide');
                            lastY = y;
                            ticking = false;
                        });
                        ticking = true;
                    }
                }, { passive: true });
            })();

            // å³ã‚µã‚¤ãƒ‰TOC ScrollSpy
            (function rightTocSpy(){
                const toc = document.getElementById('right-toc');
                if (!toc) return;
                const links = Array.from(toc.querySelectorAll('a[href^="#"]'));
                const ids = links.map(a => a.getAttribute('href').slice(1));
                const update = () => {
                    let activeIndex = -1;
                    let minTop = Infinity;
                    ids.forEach((id, i) => {
                        const el = document.getElementById(id);
                        if (!el) return;
                        const rect = el.getBoundingClientRect();
                        // ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆä¸Šéƒ¨ã‹ã‚‰ã®è·é›¢ãŒæœ€å°ã‹ã¤-120pxä»¥ä¸Šã‚’ç¾åœ¨åœ°ã¨ã™ã‚‹
                        if (rect.top >= -120 && rect.top < minTop) { minTop = rect.top; activeIndex = i; }
                    });
                    links.forEach((a, i) => a.classList.toggle('active', i === activeIndex));
                };
                window.addEventListener('scroll', update, { passive: true });
                window.addEventListener('resize', update);
                update();
            })();

            const toTop = document.getElementById('btn-back-to-top');
            if (toTop) {
                toTop.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
                const toggleVis = () => { toTop.style.display = window.scrollY > 600 ? 'block' : 'none'; };
                toggleVis();
                window.addEventListener('scroll', toggleVis, { passive: true });
            }
        };
    </script>
</body>
</html>